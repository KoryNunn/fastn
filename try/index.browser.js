(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
module.exports=function(n){var t=[];return function(r){function a(n,t){return"string"==typeof t&&t.match(/\s/)&&(t=t.split(" ")),Array.isArray(t)?n.concat(t.reduce(a,[])):(null!=t&&""!==t&&"boolean"!=typeof t&&n.push(String(t).trim()),n)}if(!arguments.length)return t.join(" ");var e=a([],r),i=n.className?n.className.split(" "):[];t.map(function(n){if(n){var t=i.indexOf(n);~t&&i.splice(t,1)}}),i=i.concat(e),t=e,n.className=i.join(" ")}};


},{}],2:[function(require,module,exports){
var clone=function(){"use strict";function e(t,r,n,o){function f(t,n){if(null===t)return null;if(0==n)return t;var i,a;if("object"!=typeof t)return t;if(e.__isArray(t))i=[];else if(e.__isRegExp(t))i=new RegExp(t.source,u(t)),t.lastIndex&&(i.lastIndex=t.lastIndex);else if(e.__isDate(t))i=new Date(t.getTime());else{if(p&&Buffer.isBuffer(t))return i=new Buffer(t.length),t.copy(i),i;"undefined"==typeof o?(a=Object.getPrototypeOf(t),i=Object.create(a)):(i=Object.create(o),a=o)}if(r){var s=c.indexOf(t);if(s!=-1)return l[s];c.push(t),l.push(i)}for(var y in t){var b;a&&(b=Object.getOwnPropertyDescriptor(a,y)),b&&null==b.set||(i[y]=f(t[y],n-1))}return i}var i;"object"==typeof r&&(n=r.depth,o=r.prototype,i=r.filter,r=r.circular);var c=[],l=[],p="undefined"!=typeof Buffer;return"undefined"==typeof r&&(r=!0),"undefined"==typeof n&&(n=1/0),f(t,n)}function t(e){return Object.prototype.toString.call(e)}function r(e){return"object"==typeof e&&"[object Date]"===t(e)}function n(e){return"object"==typeof e&&"[object Array]"===t(e)}function o(e){return"object"==typeof e&&"[object RegExp]"===t(e)}function u(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return e.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},e.__objToStr=t,e.__isDate=r,e.__isArray=n,e.__isRegExp=o,e.__getRegExpFlags=u,e}();"object"==typeof module&&module.exports&&(module.exports=clone);


},{}],3:[function(require,module,exports){
var Ajax=require("simple-ajax");module.exports=function(e,t){if("string"==typeof e&&(e={url:e}),"object"!=typeof e)throw"settings must be a string or object";if("function"!=typeof t)throw"cpjax must be passed a callback as the second parameter";var r=new Ajax(e);return r.on("success",function(e,r){t(null,r,e)}),r.on("error",function(e){t(new Error(e.target.responseText),null,e)}),r.send(),r};


},{"simple-ajax":32}],4:[function(require,module,exports){
function compare(r,e,n){var t=typeof r;if(t!==typeof e)return!1;if(null==r||null==e||"object"!==t&&"function"!==t)return!("number"!==t||!isNaN(r)||!isNaN(e))||r===e;if(Array.isArray(r)!==Array.isArray(e))return!1;var i=Object.keys(r),o=Object.keys(e);if(i.length!==o.length)return!1;var u=!0;return n||(n=new Set),i.forEach(function(t){if(!(t in e))return void(u=!1);if(!n.has(r[t]))return n.add(r[t]),compare(r[t],e[t],n)?void 0:void(u=!1)}),u}module.exports=function(r,e){return compare(r,e)};


},{}],5:[function(require,module,exports){
(function (global){
function toArray(t){return Array.prototype.slice.call(t)}function matchDeep(t){return(t+"").match(deepRegex)}function isWildcardPath(t){var e=t+"";return~e.indexOf("*")}function getTargetKey(t){var e=t+"";return e.split("|").shift()}function leftAndRest(t){var e=t+"";if(".|"===e.slice(0,2))return[".",e.slice(2)];var n=matchDeep(e);return n?[e.slice(0,n.index),e.slice(n.index+1)]:e}function isWildcardKey(t){return"*"===t.charAt(0)}function isFeralcardKey(t){return"**"===t}function addHandler(t,e,n,r){var i=trackedObjects.get(t);null==i&&(i={},trackedObjects.set(t,i));var a=i[e];a||(a=new Map,i[e]=a),a.has(r)||a.set(r,n)}function removeHandler(t,e,n,r){var i=trackedObjects.get(t);if(null!=i){var a=i[e];a&&a.delete(r)}}function trackObjects(t,e,n,r,i,a){if(r&&"object"==typeof r){var o=r[i];o&&"object"==typeof o&&e.has(o)||trackObject(t,e,n,r,i,a)}}function trackKeys(t,e,n,r,i,a){for(var o=Object.keys(r),s=0;s<o.length;s++)isFeralcardKey(i)?trackObjects(t,e,n,r,o[s],"**"+(a?".":"")+(a||"")):trackObjects(t,e,n,r,o[s],a)}function trackObject(t,e,n,r,i,a){var o="**"===i?"*":i,s=r[i],c=s&&"object"==typeof s,f=function(l,d,u){return"*"!==o&&"object"==typeof r[o]&&r[o]!==s?(c&&e.delete(s),removeHandler(r,o,f,t),void trackObjects(t,e,n,r,i,a)):("*"===o&&trackKeys(t,e,n,r,i,a),void(e.has(r)&&("**"===i&&a||n(l,d,u))))};if(addHandler(r,o,f,t),c&&(e.add(s),a)){var l,d,u=leftAndRest(a);Array.isArray(u)?(l=u[0],d=u[1],"."===l&&(l="*")):l=u,c&&isWildcardKey(l)&&trackKeys(t,e,n,s,l,d),trackObjects(t,e,n,s,l,d)}}function createHandler(t,e,n,r){var i=t._model;return function(t,a){n.entis.forEach(function(o){if(o._emittedEvents[r]!==a){if(o._model!==i)return n.entis.delete(o),void(0===n.entis.size&&(delete e[r],Object.keys(e).length||trackedEvents.delete(i)));o._emittedEvents[r]=a;var s=getTargetKey(r),c=isWildcardPath(s)?void 0:o.get(s);o.emit(r,c,t)}})}}function trackPath(t,e){var n=t._model,r=trackedEvents.get(n);r||(r={},trackedEvents.set(n,r));var i=r[e];if(i){if(i.entis.has(t))return}else i={entis:new Set,trackedObjects:new WeakSet},r[e]=i;i.entis.add(t);var a=createHandler(t,r,i,e);trackObjects(e,i.trackedObjects,a,{model:n},"model",e)}function trackPaths(t){if(t._events&&t._model){for(var e in t._events)trackPath(t,e);modifiedEnties.delete(t)}}function emitEvent(t,e,n,r){function i(t){t(o,r)}modifiedEnties.forEach(trackPaths);var a=trackedObjects.get(t);if(a){var o={value:n,key:e,object:t};a[e]&&a[e].forEach(i),a["*"]&&a["*"].forEach(i)}}function emit(t){var e={};t.forEach(function(t){emitEvent(t[0],t[1],t[2],e)})}function Enti(t){var e=t===!1;(!t||"object"!=typeof t&&"function"!=typeof t)&&(t={}),this._emittedEvents={},e?this._model={}:this.attach(t),this.on("newListener",function(){modifiedEnties.add(this)})}var EventEmitter=require("events").EventEmitter,isInstance=require("is-instance"),deepRegex=/[|.]/i,eventSystemVersion=1,globalKey="_entiEventState"+eventSystemVersion;globalState=global[globalKey]=global[globalKey]||{instances:[]};var modifiedEnties=globalState.modifiedEnties=globalState.modifiedEnties||new Set,trackedObjects=globalState.trackedObjects=globalState.trackedObjects||new WeakMap,trackedEvents=new WeakMap;Enti.emit=function(t,e,n){"object"!=typeof t&&"function"!=typeof t||emit([[t,e,n]])},Enti.get=function(t,e){if(t&&"object"==typeof t){if(e=getTargetKey(e),"."===e)return t;var n=leftAndRest(e);return Array.isArray(n)?Enti.get(t[n[0]],n[1]):t[e]}},Enti.set=function(t,e,n){if(t&&"object"==typeof t){e=getTargetKey(e);var r=leftAndRest(e);if(Array.isArray(r))return Enti.set(t[r[0]],r[1],n);var i=t[e];if("object"==typeof n||n!==i){var a=!(e in t);t[e]=n;var o=[[t,e,n]];a&&Array.isArray(t)&&o.push([t,"length",t.length]),emit(o)}}},Enti.push=function(t,e,n){if(t&&"object"==typeof t){var r;if(arguments.length<3)n=e,e=".",r=t;else{var i=leftAndRest(e);if(Array.isArray(i))return Enti.push(t[i[0]],i[1],n);r=t[e]}if(!Array.isArray(r))throw"The target is not an array.";r.push(n);var a=[[r,r.length-1,n],[r,"length",r.length]];emit(a)}},Enti.insert=function(t,e,n,r){if(t&&"object"==typeof t){var i;if(arguments.length<4)r=n,n=e,e=".",i=t;else{var a=leftAndRest(e);if(Array.isArray(a))return Enti.insert(t[a[0]],a[1],n,r);i=t[e]}if(!Array.isArray(i))throw"The target is not an array.";i.splice(r,0,n);var o=[[i,r,n],[i,"length",i.length]];emit(o)}},Enti.remove=function(t,e,n){if(t&&"object"==typeof t){var r=leftAndRest(e);if(Array.isArray(r))return Enti.remove(t[r[0]],r[1],n);if(null!=n)return void Enti.remove(t[e],n);if("."===e)throw". (self) is not a valid key to remove";var i=[];Array.isArray(t)?(t.splice(e,1),i.push([t,"length",t.length])):(delete t[e],i.push([t,e])),emit(i)}},Enti.move=function(t,e,n){if(t&&"object"==typeof t){var r=leftAndRest(e);if(Array.isArray(r))return Enti.move(t[r[0]],r[1],n);if(e!==n){if(!Array.isArray(t))throw"The model is not an array.";var i=t[e];t.splice(e,1),t.splice(n-(n>e?0:1),0,i),emit([[t,n,i]])}}},Enti.update=function(t,e,n){function r(t,e){for(var n in e){var i=t[n];!(i instanceof Object)||c.has(i)||i instanceof Date?(t[n]=e[n],s.push([t,n,e[n]])):(c.add(i),r(i,e[n]))}Array.isArray(t)&&s.push([t,"length",t.length])}if(t&&"object"==typeof t){var i,a=Array.isArray(n);if(arguments.length<3)n=e,e=".",i=t;else{var o=leftAndRest(e);if(Array.isArray(o))return Enti.update(t[o[0]],o[1],n);i=t[e],null==i&&(t[e]=a?[]:{})}if("object"!=typeof n)throw"The value is not an object.";if("object"!=typeof i)throw"The target is not an object.";var s=[],c=new WeakSet;r(i,n),emit(s)}},Enti.prototype=Object.create(EventEmitter.prototype),Enti.prototype._maxListeners=100,Enti.prototype.constructor=Enti,Enti.prototype.attach=function(t){if(this._model!==t&&this.detach(),t&&!isInstance(t))throw"Entis may only be attached to an object, or null/undefined";modifiedEnties.add(this),this._attached=!0,this._model=t,this.emit("attach",t)},Enti.prototype.detach=function(){modifiedEnties.delete(this),this._emittedEvents={},this._model={},this._attached=!1,this.emit("detach")},Enti.prototype.destroy=function(){this.detach(),this._events=null,this.emit("destroy")},Enti.prototype.get=function(t){return Enti.get(this._model,t)},Enti.prototype.set=function(t,e){return Enti.set(this._model,t,e)},Enti.prototype.push=function(t,e){return Enti.push.apply(null,[this._model].concat(toArray(arguments)))},Enti.prototype.insert=function(t,e,n){return Enti.insert.apply(null,[this._model].concat(toArray(arguments)))},Enti.prototype.remove=function(t,e){return Enti.remove.apply(null,[this._model].concat(toArray(arguments)))},Enti.prototype.move=function(t,e){return Enti.move.apply(null,[this._model].concat(toArray(arguments)))},Enti.prototype.update=function(t,e){return Enti.update.apply(null,[this._model].concat(toArray(arguments)))},Enti.prototype.isAttached=function(){return this._attached},Enti.prototype.attachedCount=function(){return modifiedEnties.size},Enti.isEnti=function(t){return t&&!!~globalState.instances.indexOf(t.constructor)},Enti.store=function(t,e,n){return arguments.length<2?Enti.get(t,e):void Enti.set(t,e,n)},globalState.instances.push(Enti),module.exports=Enti;


}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"events":48,"is-instance":24}],6:[function(require,module,exports){
function flatten(t){return Array.isArray(t)?t.reduce(function(t,n){return null==n?t:t.concat(flatten(n))},[]):t}function attachProperties(t,n){for(var e in this._properties)this._properties[e].attach(t,n)}function onRender(){this.attach(void 0,0);for(var t in this._properties)this._properties[t].update()}function detachProperties(t){for(var n in this._properties)this._properties[n].detach(t)}function destroyProperties(){for(var t in this._properties)this._properties[t].destroy()}function clone(){return this.fastn(this.component._type,this.component._settings,this.component._children.filter(function(t){return!t._templated}).map(function(t){return t.clone()}))}function getSetBinding(t){return arguments.length?(is.binding(t)||(t=this.fastn.binding(t)),this.binding&&this.binding!==t&&(this.binding.removeListener("change",this.emitAttach),t.attach(this.binding._model,this.binding._firm)),this.binding=t,this.binding.on("change",this.emitAttach),this.binding.on("detach",this.emitDetach),this.emitAttach(),this.component):this.binding}function emitAttach(){var t=this.binding();t!==this.lastBound&&(this.lastBound=t,this.scope.attach(this.lastBound),this.component.emit("attach",this.scope,1))}function emitDetach(){this.component.emit("detach",1)}function getScope(){return this.scope}function destroy(){if(!this.destroyed)return this.destroyed=!0,this.component.removeAllListeners("render").removeAllListeners("attach"),this.component.emit("destroy"),this.component.element=null,this.scope.destroy(),this.binding.destroy(),this.component}function attachComponent(t,n){return this.binding.attach(t,n),this.component}function detachComponent(t){return this.binding.detach(t),this.component}function isDestroyed(){return this.destroyed}function setProperty(t,n){return n||(n=this.component[t]||this.fastn.property()),this.component[t]=n,this.component._properties[t]=n,this.component}function extendComponent(t,n,e){if(t in this.types)return this.component;if(t in this.fastn.components)this.fastn.components[t](this.fastn,this.component,t,n,e);else{if(!(GENERIC in this.fastn.components))throw new Error('No component of type "'+t+'" is loaded');this.fastn.components._generic(this.fastn,this.component,t,n,e),this.types._generic=!0}return this.types[t]=!0,this.component}function isType(t){return t in this.types}function FastnComponent(t,n,e,i){var o=this,s={types:{},fastn:t,component:o,binding:t.binding("."),destroyed:!1,scope:new t.Model(!1),lastBound:null};s.emitAttach=emitAttach.bind(s),s.emitDetach=emitDetach.bind(s),s.binding._default_binding=!0,o._type=n,o._properties={},o._settings=e||{},o._children=i?flatten(i):[],o.attach=attachComponent.bind(s),o.detach=detachComponent.bind(s),o.scope=getScope.bind(s),o.destroy=destroy.bind(s),o.destroyed=isDestroyed.bind(s),o.binding=getSetBinding.bind(s),o.setProperty=setProperty.bind(s),o.clone=clone.bind(s),o.children=slice.bind(o._children),o.extend=extendComponent.bind(s),o.is=isType.bind(s),o.binding(s.binding),o.on("attach",attachProperties.bind(this)),o.on("render",onRender.bind(this)),o.on("detach",detachProperties.bind(this)),o.on("destroy",destroyProperties.bind(this)),t.debug&&o.on("render",function(){o.element&&"object"==typeof o.element&&(o.element._component=o)})}var is=require("./is"),GENERIC="_generic",EventEmitter=require("events").EventEmitter,slice=Array.prototype.slice;FastnComponent.prototype=Object.create(EventEmitter.prototype),FastnComponent.prototype.constructor=FastnComponent,FastnComponent.prototype._fastn_component=!0,module.exports=FastnComponent;


},{"./is":13,"events":48}],7:[function(require,module,exports){
function fuseBinding(){function e(){n||c(o.apply(null,r.map(function(e){return e()})))}var t,n,i=this,a=Array.prototype.slice.call(arguments),r=a.slice(),o=r.pop(),c=createBinding.call(i,"result");c._arguments=a,"function"!=typeof r[r.length-1]||is.binding(r[r.length-1])||(t=o,o=r.pop()),c._model.removeAllListeners(),c._set=function(e){if(t){n=!0;var i=t(e);same(i,r[0]())||(r[0](i),c._change(i)),n=!1}else c._change(e)},r.forEach(function(t,n){is.binding(t)||(t=createBinding.call(i,t),r.splice(n,1,t)),t.on("change",e),c.on("detach",t.detach)});var d;return c.on("attach",function(t){n=!0,r.forEach(function(e){e.attach(t,1)}),n=!1,d!==t&&e(),d=t}),c}function createValueBinding(e){var t=createBinding.call(e,"value");return t.attach=function(){return t},t.detach=function(){return t},t}function bindingTemplate(e){if(!arguments.length)return this.value;if("."!==this.binding._fastn_binding)return this.binding._set(e),this.binding}function createBinding(e,t){function n(t){c._model.attach(t),c._change(c._model.get(e)),c.emit("attach",t,1)}function i(){c._model.detach()}var a=this;if(t)return fuseBinding.apply(a,arguments);if(null==e)return createValueBinding(a);var r,o={},c=o.binding=bindingTemplate.bind(o);return setPrototypeOf(c,functionEmitter),c.setMaxListeners(1e4),c._arguments=[e],c._model=new a.Model(!1),c._fastn_binding=e,c._firm=-(1/0),c.attach=function(e,t){if(firmer(c,t))return c;c._firm=t;var r=a.isModel(e);return r&&o.attachedModel===e?c:(o.attachedModel&&(o.attachedModel.removeListener("attach",n),o.attachedModel.removeListener("detach",i),o.attachedModel=null),r&&(o.attachedModel=e,o.attachedModel.on("attach",n),o.attachedModel.on("detach",i),e=e._model),e instanceof Object||(e={}),c._model._model===e?c:(n(e),c))},c.detach=function(e){return firmer(c,e)?c:(o.value=void 0,c._model.isAttached()&&c._model.detach(),c.emit("detach",1),c)},c._set=function(t){same(c._model.get(e),t)||(c._model.isAttached()||c._model.attach(c._model.get(".")),c._model.set(e,t))},c._change=function(e){o.value=e,c.emit("change",c())},c.clone=function(e){var t=createBinding.apply(a,c._arguments);return e&&t.attach(o.attachedModel||c._model._model,c._firm),t},c.destroy=function(e){r||e&&c.listeners("change").length||(r=!0,c.emit("destroy"),c.detach(),c._model.destroy())},c.destroyed=function(){return r},"."!==e&&c._model.on(e,c._change),c}function from(e){if(is.binding(e))return e;var t=this();return t(e),t}var is=require("./is"),firmer=require("./firmer"),functionEmitter=require("function-emitter"),setPrototypeOf=require("setprototypeof"),same=require("same-value");module.exports=function(e){var t=createBinding.bind(e);return t.from=from.bind(t),t};


},{"./firmer":10,"./is":13,"function-emitter":23,"same-value":30,"setprototypeof":17}],8:[function(require,module,exports){
function insertChild(e,n,t,i){if(null!=t&&t!==!1){var r=n._children.indexOf(t),l=e.toComponent(t);l!==t&&~r&&n._children.splice(r,1,l),~r&&l===t||l.attach(n.scope(),1),r!==i&&(~r&&n._children.splice(r,1),n._children.splice(i,0,l)),n.element&&(l.element||l.render(),n._insert(l.element,i),l.emit("insert",n),n.emit("childInsert",l))}}function getContainerElement(){return this.containerElement||this.element}function insert(e,n){var t=e,i=this.container,r=this.fastn;if(n&&"object"==typeof n&&(t=Array.prototype.slice.call(arguments)),isNaN(n)&&(n=i._children.length),Array.isArray(t))for(var l=0;l<t.length;l++)i.insert(t[l],l+n);else insertChild(r,i,t,n);return i}module.exports=function(e,n,t,i,r){return n.insert=insert.bind({container:n,fastn:e}),n._insert=function(e,t){var i=n.getContainerElement();i&&i.childNodes[t]!==e&&i.insertBefore(e,i.childNodes[t])},n.remove=function(e){var t=n._children.indexOf(e);~t&&n._children.splice(t,1),e.detach(1),e.element&&(n._remove(e.element),e.emit("remove",n)),n.emit("childRemove",e)},n._remove=function(e){var t=n.getContainerElement();e&&t&&e.parentNode===t&&t.removeChild(e)},n.empty=function(){for(;n._children.length;)n.remove(n._children.pop())},n.replaceChild=function(e,t){var i=n._children.indexOf(e);~i&&(n.remove(e),n.insert(t,i))},n.getContainerElement=getContainerElement.bind(n),n.on("render",n.insert.bind(null,n._children,0)),n.on("attach",function(t,i){for(var r=0;r<n._children.length;r++)e.isComponent(n._children[r])&&n._children[r].attach(t,i)}),n.on("destroy",function(t,i){for(var r=0;r<n._children.length;r++)e.isComponent(n._children[r])&&n._children[r].destroy(i)}),n};


},{}],9:[function(require,module,exports){
function updateTextProperty(e,t,n){return 2===arguments.length?t.textContent:void(t.textContent=null==n?"":n)}var setify=require("setify"),classist=require("classist");module.exports={class:function(e,t,n){return e._classist||(e._classist=classist(t)),arguments.length<3?e._classist():void e._classist(n)},display:function(e,t,n){return 2===arguments.length?"none"!==t.style.display:void(t.style.display=n?null:"none")},disabled:function(e,t,n){return 2===arguments.length?t.hasAttribute("disabled"):void(n?t.setAttribute("disabled","disabled"):t.removeAttribute("disabled"))},textContent:updateTextProperty,innerText:updateTextProperty,innerHTML:function(e,t,n){return 2===arguments.length?t.innerHTML:void(t.innerHTML=null==n?"":n)},value:function(e,t,n){var l=t.type;return"INPUT"===t.nodeName&&"date"===l?2===arguments.length?t.value?new Date(t.value.replace(/-/g,"/").replace("T"," ")):null:(n=null!=n?new Date(n):null,void(!n||isNaN(n)?t.value=null:t.value=[n.getFullYear(),("0"+(n.getMonth()+1)).slice(-2),("0"+n.getDate()).slice(-2)].join("-"))):2===arguments.length?t.value:(void 0===n&&(n=null),"PROGRESS"===t.nodeName&&(n=parseFloat(n)||0),void setify(t,n))},max:function(e,t,n){return 2===arguments.length?t.value:("PROGRESS"===t.nodeName&&(n=parseFloat(n)||0),void(t.max=n))},style:function(e,t,n){if(2===arguments.length)return t.style;for(var l in n)t.style[l]=n[l]},type:function(e,t,n){return 2===arguments.length?t.type:void t.setAttribute("type",n)}};


},{"classist":1,"setify":31}],10:[function(require,module,exports){
module.exports=function(i,r){if(null!=r&&(void 0===i._firm||r<i._firm))return!0};


},{}],11:[function(require,module,exports){
function createProperties(e,t,n){for(var r in n){var o=n[r];("function"!=typeof o||e.isProperty(o)||e.isBinding(o))&&t.addDomProperty(r)}}function trackKeyEvents(e,t,n){"_lastStates"in e&&"charCode"in n&&(e._lastStates.unshift(t.value),e._lastStates.pop())}function addDomHandler(e,t,n,r,o){var i=n.split(".");"on"===i[0]&&i.shift();var a=function(r){trackKeyEvents(e,t,r),e.emit(n,r,e.scope())};t.addEventListener(r,a,o),e.on("destroy",function(){t.removeEventListener(r,a,o)})}function addDomHandlers(e,t,n){for(var r=n.split(" "),o=0;o<r.length;o++){var i=r[o],a=i.match(matchDomHandlerName);a&&(a[1]||"on"+a[2]in t)&&addDomHandler(e,t,n,a[2],a[3])}}function addAutoHandler(e,t,n,r){if(r[n]){var o=r[n].split(":"),i=n.slice(2);delete r[n];var a=function(n){var r=fancyProps[o[1]],i=r?r(e,t):t[o[1]];trackKeyEvents(e,t,n),e[o[0]](i)};t.addEventListener(i,a),e.on("destroy",function(){t.removeEventListener(i,a)})}}function addDomProperty(e,t,n){function r(){var e=i.getPropertyElement(t),a=n();if(e&&!i.destroyed()){if("value"===t&&i._lastStates&&~i._lastStates.indexOf(a))return clearTimeout(o),void(o=setTimeout(r,50));var d=t in e,s=fancyProps[t],c=s?s(i,e):d?e[t]:e.getAttribute(t);if(s||d||null!=a||(a=""),a!==c){if(s)return void s(i,e,a);if(d)return void(e[t]=a);"function"!=typeof a&&"object"!=typeof a&&e.setAttribute(t,a)}}}var o,i=this;n=n||i[t]||e.property(),i.setProperty(t,n),n.updater(r)}function onRender(){var e,t=this;for(var n in t._settings)e=t.getEventElement(n),"on"===n.slice(0,2)&&n in e&&addAutoHandler(t,e,n,t._settings);for(var r in t._events)e=t.getEventElement(n),addDomHandlers(t,e,r)}function render(){return this.element=this.createElement(this._settings.tagName||this._tagName),"value"in this.element&&(this._lastStates=new Array(2)),this.emit("render"),this}function genericComponent(e,t,n,r,o){return t.is(n)?t:(n===GENERIC?t._tagName=t._tagName||"div":t._tagName=n,t.is(GENERIC)?t:(t.extend("_container",r,o),t.addDomProperty=addDomProperty.bind(t,e),t.getEventElement=t.getContainerElement,t.getPropertyElement=t.getContainerElement,t.updateProperty=genericComponent.updateProperty,t.createElement=genericComponent.createElement,createProperties(e,t,r),t.render=render.bind(t),t.on("render",onRender),t))}var containerComponent=require("./containerComponent"),schedule=require("./schedule"),fancyProps=require("./fancyProps"),matchDomHandlerName=/^((?:el\.)?)([^. ]+)(?:\.(capture))?$/,GENERIC="_generic";genericComponent.updateProperty=function(e,t,n){"undefined"!=typeof document&&document.contains(e.element)?schedule(t,n):n()},genericComponent.createElement=function(e){return e instanceof Node?e:document.createElement(e)},module.exports=genericComponent;


},{"./containerComponent":8,"./fancyProps":9,"./schedule":19}],12:[function(require,module,exports){
function inflateProperties(e,n){for(var t in n){var i=n[t],o=e[t];is.property(n[t])?(is.property(o)&&o.destroy(),i.addTo(e,t)):is.property(o)&&(is.binding(i)?o.binding(i):o(i),o.addTo(e,t))}}function validateExpectedComponents(e,n,t){t=t.filter(function(n){return!(n in e)}),t.length&&console.warn(['fastn("'+n+'") uses some components that have not been registered with fastn',"Expected conponent constructors: "+t.join(", ")].join("\n\n"))}var createProperty=require("./property"),createBinding=require("./binding"),BaseComponent=require("./baseComponent"),crel=require("crel"),Enti=require("enti"),objectAssign=require("object-assign"),is=require("./is");module.exports=function(e,n){function t(e){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=n[1],r=2,s=t.toComponent(n[1]);(Array.isArray(n[1])||s||!n[1])&&(n[1]=s||n[1],r--,o=null),o=objectAssign({},o||{});for(var a,p="string"==typeof e?e.split(":"):Array.isArray(e)?e:[e],c=n.slice(r),d=t.base(e,o,c);a=p.shift();)d.extend(a,o,c);return d._properties={},inflateProperties(d,o),d}if(!e||"object"!=typeof e)throw new Error("fastn must be initialised with a components object");e._container=e._container||require("./containerComponent"),t.toComponent=function(e){if(null!=e)return is.component(e)?e:"object"!=typeof e||e instanceof Date?t("text",{auto:!0},e):crel.isElement(e)?t(e):crel.isNode(e)?t("text",{auto:!0},e.textContent):void 0},t.debug=n,t.property=createProperty.bind(t),t.binding=createBinding(t),t.isComponent=is.component,t.isBinding=is.binding,t.isDefaultBinding=is.defaultBinding,t.isBindingObject=is.bindingObject,t.isProperty=is.property,t.components=e,t.Model=Enti,t.isModel=Enti.isEnti.bind(Enti),t.base=function(e,n,i){return new BaseComponent(t,e,n,i)};for(var i in e){var o=e[i];o.expectedComponents&&validateExpectedComponents(e,i,o.expectedComponents)}return t};


},{"./baseComponent":6,"./binding":7,"./containerComponent":8,"./is":13,"./property":18,"crel":15,"enti":5,"object-assign":16}],13:[function(require,module,exports){
function isComponent(n){return n&&typeof n===OBJECT&&FASTNCOMPONENT in n}function isBindingObject(n){return n&&typeof n===OBJECT&&FASTNBINDING in n}function isBinding(n){return typeof n===FUNCTION&&FASTNBINDING in n}function isProperty(n){return typeof n===FUNCTION&&FASTNPROPERTY in n}function isDefaultBinding(n){return typeof n===FUNCTION&&FASTNBINDING in n&&DEFAULTBINDING in n}var FUNCTION="function",OBJECT="object",FASTNBINDING="_fastn_binding",FASTNPROPERTY="_fastn_property",FASTNCOMPONENT="_fastn_component",DEFAULTBINDING="_default_binding";module.exports={component:isComponent,bindingObject:isBindingObject,binding:isBinding,defaultBinding:isDefaultBinding,property:isProperty};


},{}],14:[function(require,module,exports){
function each(e,t){if(e&&"object"==typeof e)if(Array.isArray(e))for(var r=0;r<e.length;r++)t(e[r],r);else for(var n in e)t(e[n],n)}function keyFor(e,t){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){var r=e.indexOf(t);return r>=0&&r}for(var n in e)if(e[n]===t)return n;return!1}var MultiMap=require("multimap"),merge=require("flat-merge");MultiMap.Map=Map,module.exports=function(e,t,r,n,a){function o(){function r(r,n){for(var o,i;y<t._children.length&&!t._children[y]._templated;)y++;Array.isArray(r)&&r[0]===l&&(i=!0,o=r[2],r=r[1]);var p;i?(p=s.get(o),p.set("key",n)):(p=new e.Model({item:r,key:n}),o=e.toComponent(a(p,t.scope())),o||(o=e("template")),o._listItem=r,o._templated=!0,s.set(o,p),m.set(r,o)),e.isComponent(o)&&t._settings.attachTemplates!==!1&&o.attach(p,2),t.insert(o,y),y++}var n=t.items(),a=t.template(),o=t.emptyTemplate(),c=p!==a,f=merge(a?n:[]);m.forEach(function(e,t){var r=keyFor(f,t);c||r===!1?(i(e),m.delete(t)):f[r]=[l,t,e]});var y=0;if(each(f,r),p=a,0===y&&o){var u=e.toComponent(o(t.scope()));u||(u=e("template")),u._templated=!0,m.set({},u),t.insert(u)}}function i(e){t.remove(e),e.destroy()}e.components._generic?t.extend("_generic",n,a):t.extend("_container",n,a),"template"in n||console.warn('No "template" function was set for this templater component');var p,m=new MultiMap,s=new WeakMap,l={};return t.setProperty("items",e.property([],n.itemChanges||"type keys shallowStructure").on("change",o)),t.setProperty("template",e.property().on("change",o)),t.setProperty("emptyTemplate",e.property().on("change",o)),t};


},{"flat-merge":22,"multimap":27}],15:[function(require,module,exports){
!function(e,n){"object"==typeof exports?module.exports=n():"function"==typeof define&&define.amd?define(n):e.crel=n()}(this,function(){function e(){var o,a=arguments,p=a[0],m=a[1],x=2,v=a.length,b=e[f];if(p=e[c](p)?p:d.createElement(p),1===v)return p;if((!l(m,t)||e[u](m)||s(m))&&(--x,m=null),v-x===1&&l(a[x],"string")&&void 0!==p[r])p[r]=a[x];else for(;x<v;++x)if(o=a[x],null!=o)if(s(o))for(var g=0;g<o.length;++g)y(p,o[g]);else y(p,o);for(var h in m)if(b[h]){var N=b[h];typeof N===n?N(p,m[h]):p[i](N,m[h])}else p[i](h,m[h]);return p}var n="function",t="object",o="nodeType",r="textContent",i="setAttribute",f="attrMap",u="isNode",c="isElement",d=typeof document===t?document:{},l=function(e,n){return typeof e===n},a=typeof Node===n?function(e){return e instanceof Node}:function(e){return e&&l(e,t)&&o in e&&l(e.ownerDocument,t)},p=function(n){return e[u](n)&&1===n[o]},s=function(e){return e instanceof Array},y=function(n,t){e[u](t)||(t=d.createTextNode(t)),n.appendChild(t)};return e[f]={},e[c]=p,e[u]=a,"undefined"!=typeof Proxy&&(e.proxy=new Proxy(e,{get:function(n,t){return!(t in e)&&(e[t]=e.bind(null,t)),e[t]}})),e});


},{}],16:[function(require,module,exports){
"use strict";function toObject(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function shouldUseNative(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var r={},t=0;t<10;t++)r["_"+String.fromCharCode(t)]=t;var n=Object.getOwnPropertyNames(r).map(function(e){return r[e]});if("0123456789"!==n.join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(e){o[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(e){return!1}}var hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;module.exports=shouldUseNative()?Object.assign:function(e,r){for(var t,n,o=toObject(e),a=1;a<arguments.length;a++){t=Object(arguments[a]);for(var c in t)hasOwnProperty.call(t,c)&&(o[c]=t[c]);if(Object.getOwnPropertySymbols){n=Object.getOwnPropertySymbols(t);for(var s=0;s<n.length;s++)propIsEnumerable.call(t,n[s])&&(o[n[s]]=t[n[s]])}}return o};


},{}],17:[function(require,module,exports){
function setProtoOf(o,r){return o.__proto__=r,o}function mixinProperties(o,r){for(var t in r)o[t]=r[t];return o}module.exports=Object.setPrototypeOf||({__proto__:[]}instanceof Array?setProtoOf:mixinProperties);


},{}],18:[function(require,module,exports){
function propertyTemplate(t){if(!arguments.length)return this.binding&&this.binding()||this.property._value;if(!this.destroyed){if(this.binding)return this.binding(t),this.property;this.valueUpdate(t)}return this.property}function changeChecker(t,e){if(e){var e=new WhatChanged(t,e);return function(t){return Object.keys(e.update(t)).length>0}}var r=t;return function(t){if(!same(r,t))return r=t,!0}}function propertyBinding(t){return arguments.length?(this.fastn.isBinding(t)||(t=this.fastn.binding(t)),t===this.binding?this.property:(this.binding&&this.binding.removeListener("change",this.valueUpdate),this.binding=t,this.model&&this.property.attach(this.model,this.property._firm),this.binding.on("change",this.valueUpdate),this.valueUpdate(this.binding()),this.property)):this.binding}function attachProperty(t,e){return firmer(this.property,e)?this.property:(this.property._firm=e,t instanceof Object||(t={}),this.binding&&(this.model=t,this.binding.attach(t,1)),this.property._events&&"attach"in this.property._events&&this.property.emit("attach",t,1),this.property)}function detachProperty(t){return firmer(this.property,t)?this.property:(this.binding&&(this.binding.removeListener("change",this.valueUpdate),this.binding.detach(1),this.model=null),this.property._events&&"detach"in this.property._events&&this.property.emit("detach",1),this.property)}function updateProperty(){return this.destroyed||(this.property._update&&this.property._update(this.property._value,this.property),this.property.emit("update",this.property._value)),this.property}function propertyUpdater(t){return arguments.length?(this.property._update=t,this.property):this.property._update}function destroyProperty(){return this.destroyed||(this.destroyed=!0,this.property.removeAllListeners("change").removeAllListeners("update").removeAllListeners("attach"),this.property.emit("destroy"),this.property.detach(),this.binding&&this.binding.destroy(!0)),this.property}function propertyDestroyed(){return this.destroyed}function addPropertyTo(t,e){return t.setProperty(e,this.property),this.property}function createProperty(t,e,r){"function"==typeof e&&(r=e,e=null);var i=n=propertyTemplate.bind(i);i={fastn:this,hasChanged:changeChecker(t,e),valueUpdate:function(t){n._value=t,i.hasChanged(t)&&(n.emit("change",n._value),n.update())}};var n=i.property=propertyTemplate.bind(i);return n._value=t,n._update=r,setPrototypeOf(n,propertyProto),n.binding=propertyBinding.bind(i),n.attach=attachProperty.bind(i),n.detach=detachProperty.bind(i),n.update=updateProperty.bind(i),n.updater=propertyUpdater.bind(i),n.destroy=destroyProperty.bind(i),n.destroyed=propertyDestroyed.bind(i),n.addTo=addPropertyTo.bind(i),n}var WhatChanged=require("what-changed"),same=require("same-value"),firmer=require("./firmer"),functionEmitter=require("function-emitter"),setPrototypeOf=require("setprototypeof"),propertyProto=Object.create(functionEmitter);propertyProto._fastn_property=!0,propertyProto._firm=1,module.exports=createProperty;


},{"./firmer":10,"function-emitter":23,"same-value":30,"setprototypeof":17,"what-changed":33}],19:[function(require,module,exports){
function run(){for(var e=Date.now();todo.length&&Date.now()-e<16;)todoKeys.shift(),todo.shift()();todo.length?requestAnimationFrame(run):scheduled=!1}function schedule(e,o){~todoKeys.indexOf(e)||(todo.push(o),todoKeys.push(e),scheduled||(scheduled=!0,requestAnimationFrame(run)))}var todo=[],todoKeys=[],scheduled,updates=0;module.exports=schedule;


},{}],20:[function(require,module,exports){
module.exports=function(e,t,n,o,r){function m(e){t.element&&t.element.parentNode&&t.element.parentNode.replaceChild(e,t.element),t.element=e}function p(){var n=t.data(),o=t.template();c.set("item",n);var r;return o&&(r=e.toComponent(o(c,t.scope(),t._currentComponent))),t._currentComponent&&t._currentComponent!==r&&e.isComponent(t._currentComponent)&&t._currentComponent.destroy(),t._currentComponent=r,r?void(e.isComponent(r)&&(t._settings.attachTemplates!==!1?r.attach(c,2):r.attach(t.scope(),1),t.element&&t.element!==r.element&&(null==r.element&&r.render(),m(t._currentComponent.element)))):void m(t.emptyElement)}var c=new e.Model({});return"template"in o||console.warn('No "template" function was set for this templater component'),t.render=function(){var e;t.emptyElement=document.createTextNode(""),t._currentComponent&&(t._currentComponent.render(),e=t._currentComponent.element),t.element=e||t.emptyElement,t.emit("render")},t.setProperty("data",e.property(void 0,o.dataChanges||"value structure").on("change",p)),t.setProperty("template",e.property(void 0,"value reference").on("change",p)),t.on("destroy",function(){e.isComponent(t._currentComponent)&&t._currentComponent.destroy()}),t.on("attach",function(n){e.isComponent(t._currentComponent)&&t._currentComponent.attach(t.scope(),1)}),t};


},{}],21:[function(require,module,exports){
function updateText(){if(this.element){var e=this.text();this.element.textContent=null==e?"":e}}function autoRender(e){this.element=document.createTextNode(e)}function autoText(e,t,n){return e.render=autoRender.bind(e,n),e}function render(){this.element=this.createTextNode(this.text()),this.emit("render")}function textComponent(e,t,n,o,r){if(o.auto){if(delete o.auto,!e.isBinding(r[0]))return autoText(t,e,r[0]);o.text=r.pop()}return t.createTextNode=textComponent.createTextNode,t.render=render.bind(t),t.setProperty("text",e.property("",updateText.bind(t))),t}textComponent.createTextNode=function(e){return document.createTextNode(e)},module.exports=textComponent;


},{}],22:[function(require,module,exports){
function flatMerge(e,t){t&&"object"==typeof t||(t={}),e&&"object"==typeof e||(e=new t.constructor);for(var o=new e.constructor,r=Object.keys(e),c=Object.keys(t),n=0;n<r.length;n++)o[r[n]]=e[r[n]];for(var n=0;n<c.length;n++)o[c[n]]=t[c[n]];return o}module.exports=flatMerge;


},{}],23:[function(require,module,exports){
var EventEmitter=require("events").EventEmitter,functionEmitterPrototype=function(){};for(var key in EventEmitter.prototype)functionEmitterPrototype[key]=EventEmitter.prototype[key];module.exports=functionEmitterPrototype;


},{"events":48}],24:[function(require,module,exports){
module.exports=function(o){return o&&"object"==typeof o||"function"==typeof o};


},{}],25:[function(require,module,exports){
function checkElement(e,n){if(!e)return!1;for(var t=e;t;){if(n&&t.style&&"none"===t.style.display)return!1;if(t===e.ownerDocument)return!0;t=t.parentNode}return!1}module.exports=function(e,n,t){if(arguments.length<3&&(t=n,n=!1),checkElement(e,n))return t();var r=function(){return checkElement(e,n)?(document.removeEventListener("DOMNodeInserted",r),void t()):void(n&&requestAnimationFrame(r))};r(),document.addEventListener("DOMNodeInserted",r)};


},{}],26:[function(require,module,exports){
(function (process,Buffer){
var LZUTF8;!function(e){function t(){return"object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node}function r(){return t()&&require.main===module}function n(){return"object"==typeof module&&"object"==typeof module.exports}function o(){return"undefined"==typeof window&&"object"==typeof self&&"function"==typeof self.addEventListener}function i(){return"object"==typeof window&&"object"==typeof window.location&&("http:"!==document.location.protocol&&"https:"!==document.location.protocol)}function u(){return"function"==typeof Worker&&!i()}function s(e,t){void 0===t&&(t=!1),console.log(e),t&&"object"==typeof document&&(document.body.innerHTML+=e+"<br/>")}function a(e,r){if(void 0===r&&(r="Unhandled exception"),r+=": ","object"==typeof e.content){if(t())return r+e.content.stack;var n=JSON.stringify(e.content);return"{}"!==n?r+n:r+e.content}return"string"==typeof e.content?r+e.content:r+e}function c(e,t){void 0===t&&(t="Unhandled exception"),s(a(e,t))}e.runningInNodeJS=t,e.runningInMainNodeJSModule=r,e.commonJSSupported=n,e.runningInWebWorker=o,e.runningInNullOrigin=i,e.webWorkersAvailable=u,e.log=s,e.createErrorMessage=a,e.printExceptionAndStackTraceToConsole=c,n()&&(module.exports=e)}(LZUTF8||(LZUTF8={})),"function"==typeof Uint8Array&&0!==new Uint8Array(1).subarray(1).byteLength&&!function(){for(var e=function(e,t){function r(e,t,r){return e<t?t:e>r?r:e}e=0|e,t=0|t,arguments.length<1&&(e=0),arguments.length<2&&(t=this.length),e<0&&(e=this.length+e),t<0&&(t=this.length+t),e=r(e,0,this.length),t=r(t,0,this.length);var n=t-e;return n<0&&(n=0),new this.constructor(this.buffer,this.byteOffset+e*this.BYTES_PER_ELEMENT,n)},t=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"],r=0;r<t.length;r++)this[t[r]]&&(this[t[r]].prototype.subarray=e)}();var LZUTF8;!function(e){var t=function(){function t(){}return t.compressAsync=function(t,r,n){var o=new e.Timer,i=new e.Compressor;if(!n)throw new TypeError("compressAsync: No callback argument given");if("string"==typeof t)t=e.encodeUTF8(t);else if(null==t||!(t instanceof Uint8Array))return void n(void 0,new TypeError("compressAsync: Invalid input argument, only 'string' and 'Uint8Array' are supported"));var u=e.ArrayTools.splitByteArray(t,r.blockSize),s=[],a=function(t){if(t<u.length){var c=void 0;try{c=i.compressBlock(u[t])}catch(e){return void n(void 0,e)}s.push(c),o.getElapsedTime()<=20?a(t+1):(e.enqueueImmediate(function(){return a(t+1)}),o.restart())}else{var f=e.ArrayTools.joinByteArrays(s);e.enqueueImmediate(function(){var t;try{t=e.CompressionCommon.encodeCompressedBytes(f,r.outputEncoding)}catch(e){return void n(void 0,e)}e.enqueueImmediate(function(){return n(t)})})}};e.enqueueImmediate(function(){return a(0)})},t.createCompressionStream=function(){var t=new e.Compressor,r=require("stream"),n=new r.Transform({decodeStrings:!0,highWaterMark:65536});return n._transform=function(r,o,i){var u;try{u=e.ArrayTools.uint8ArrayToBuffer(t.compressBlock(e.ArrayTools.bufferToUint8Array(r)))}catch(e){return void n.emit("error",e)}n.push(u),i()},n},t}();e.AsyncCompressor=t}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(e){var t=function(){function t(){}return t.decompressAsync=function(t,r,n){if(!n)throw new TypeError("decompressAsync: No callback argument given");var o=new e.Timer;try{t=e.CompressionCommon.decodeCompressedData(t,r.inputEncoding)}catch(e){return void n(void 0,e)}var i=new e.Decompressor,u=e.ArrayTools.splitByteArray(t,r.blockSize),s=[],a=function(t){if(t<u.length){var c=void 0;try{c=i.decompressBlock(u[t])}catch(e){return void n(void 0,e)}s.push(c),o.getElapsedTime()<=20?a(t+1):(e.enqueueImmediate(function(){return a(t+1)}),o.restart())}else{var f=e.ArrayTools.joinByteArrays(s);e.enqueueImmediate(function(){var t;try{t=e.CompressionCommon.encodeDecompressedBytes(f,r.outputEncoding)}catch(e){return void n(void 0,e)}e.enqueueImmediate(function(){return n(t)})})}};e.enqueueImmediate(function(){return a(0)})},t.createDecompressionStream=function(){var t=new e.Decompressor,r=require("stream"),n=new r.Transform({decodeStrings:!0,highWaterMark:65536});return n._transform=function(r,o,i){var u;try{u=e.ArrayTools.uint8ArrayToBuffer(t.decompressBlock(e.ArrayTools.bufferToUint8Array(r)))}catch(e){return void n.emit("error",e)}n.push(u),i()},n},t}();e.AsyncDecompressor=t}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(e){var t=function(){function t(){}return t.compressAsync=function(r,n,o){var i=n.inputEncoding,u=n.outputEncoding;if(t.supportsTransferableObjects){if("ByteArray"==n.inputEncoding&&!(r instanceof Uint8Array))return void o(void 0,new TypeError("compressAsync: input is not a Uint8Array"))}else{if("ByteArray"==n.inputEncoding){try{r=e.decodeUTF8(r)}catch(e){return void o(void 0,e)}i="String"}"ByteArray"==n.outputEncoding&&(u="BinaryString")}var s={token:Math.random().toString(),type:"compress",data:r,inputEncoding:i,outputEncoding:u};"ByteArray"==s.inputEncoding?t.globalWorker.postMessage(s,[new Uint8Array(s.data).buffer]):t.globalWorker.postMessage(s,[]);var a=function(r){var i=r.data;i&&i.token==s.token&&(t.globalWorker.removeEventListener("message",a),"ByteArray"==n.outputEncoding&&"BinaryString"==i.inputEncoding&&(i.data=e.decodeBinaryString(i.data)),e.enqueueImmediate(function(){return o(i.data)}))};t.globalWorker.addEventListener("message",a),t.globalWorker.addEventListener("error",function(e){o(void 0,e)})},t.decompressAsync=function(r,n,o){var i=n.inputEncoding,u=n.outputEncoding;if(!t.supportsTransferableObjects){if("ByteArray"==n.inputEncoding){try{r=e.encodeBinaryString(r)}catch(e){return void o(void 0,e)}i="BinaryString"}"ByteArray"==n.outputEncoding&&(u="String")}var s={token:Math.random().toString(),type:"decompress",data:r,inputEncoding:i,outputEncoding:u};"ByteArray"==s.inputEncoding?t.globalWorker.postMessage(s,[new Uint8Array(s.data).buffer]):t.globalWorker.postMessage(s,[]);var a=function(r){var i=r.data;i&&i.token==s.token&&(t.globalWorker.removeEventListener("message",a),"ByteArray"==n.outputEncoding&&"String"==i.inputEncoding&&(i.data=e.encodeUTF8(i.data)),e.enqueueImmediate(function(){return o(i.data)}))};t.globalWorker.addEventListener("message",a),t.globalWorker.addEventListener("error",function(e){o(void 0,e)})},t.workerMessageHandler=function(t){var r=t.data;if("compress"==r.type){var n=e.compress(r.data,{outputEncoding:r.outputEncoding}),o={token:r.token,type:"compressionResult",data:n,inputEncoding:r.outputEncoding};"ByteArray"==o.inputEncoding?self.postMessage(o,[n.buffer]):self.postMessage(o,[])}else if("decompress"==r.type){var i=e.decompress(r.data,{inputEncoding:r.inputEncoding,outputEncoding:r.outputEncoding}),o={token:r.token,type:"decompressionResult",data:i,inputEncoding:r.outputEncoding};"ByteArray"==o.inputEncoding?self.postMessage(o,[i.buffer]):self.postMessage(o,[])}},t.registerListenerIfRunningInWebWorker=function(){"object"==typeof self&&void 0===self.document&&void 0!=self.addEventListener&&(self.addEventListener("message",t.workerMessageHandler),self.addEventListener("error",function(t){e.log("LZUTF8 WebWorker exception: "+t.message)}))},t.createGlobalWorkerIfItDoesntExist=function(){if(!t.globalWorker){if(!t.isSupported())throw new Error("createGlobalWorkerIfItDoesntExist: Web workers are not supported or script source is not available");t.scriptURI||(t.scriptURI=document.getElementById("lzutf8").getAttribute("src")),t.globalWorker=new Worker(t.scriptURI),t.supportsTransferableObjects=t.testSupportForTransferableObjects()}},t.isSupported=function(){if(t.globalWorker)return!0;if(!e.webWorkersAvailable())return!1;if(t.scriptURI)return!0;var r=document.getElementById("lzutf8");return!(!r||"SCRIPT"!=r.tagName)||(e.log("Cannot use a web worker as no script element with id 'lzutf8' was found in the page"),!1)},t.testSupportForTransferableObjects=function(){if("undefined"==typeof Uint8Array)return!1;if(!t.globalWorker)throw new Error("testSupportForTransferableObjects: No global worker created");var e=new ArrayBuffer(1);try{t.globalWorker.postMessage(e,[e])}catch(e){return!1}return 0===e.byteLength},t.terminate=function(){t.globalWorker&&(t.globalWorker.terminate(),t.globalWorker=void 0)},t}();e.WebWorker=t,t.registerListenerIfRunningInWebWorker()}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(e){var t=function(){function e(){}return e.prototype.get=function(e){return this.container[this.startPosition+e]},e.prototype.getInReversedOrder=function(e){return this.container[this.startPosition+this.length-1-e]},e.prototype.set=function(e,t){this.container[this.startPosition+e]=t},e}();e.ArraySegment=t}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(e){var t=function(){function t(){}return t.copyElements=function(e,t,r,n,o){for(;o--;)r[n++]=e[t++]},t.zeroElements=function(e,t,r){for(;r--;)e[t++]=0},t.find=function(e,t){for(var r=0;r<e.length;r++)if(e[r]===t)return r;return-1},t.compareSequences=function(t,r){var n=!0,o=!0;t.length!==r.length&&(e.log("Sequence length did not match: sequence 1 length is "+t.length+", sequence 2 length is "+r.length),n=!1);for(var i=0;i<Math.min(t.length,r.length);i++)if(t[i]!==r[i]){e.log("Sequence elements did not match: sequence1["+i+"] === "+t[i]+", sequence2["+i+"] === "+r[i]),o=!1;break}return n&&o},t.countNonzeroValuesInArray=function(e){for(var t=0,r=0;r<e.length;r++)e[r]&&t++;return t},t.truncateStartingElements=function(e,t){if(e.length<=t)throw new RangeError("truncateStartingElements: Requested length should be smaller than array length");for(var r=e.length-t,n=0;n<t;n++)e[n]=e[r+n];e.length=t},t.doubleByteArrayCapacity=function(e){var t=new Uint8Array(2*e.length);return t.set(e),t},t.joinByteArrays=function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r].length;for(var n=new Uint8Array(t),o=0,r=0;r<e.length;r++)n.set(e[r],o),o+=e[r].length;return n},t.splitByteArray=function(e,t){for(var r=[],n=0;n<e.length;){var o=Math.min(t,e.length-n);r.push(e.subarray(n,n+o)),n+=o}return r},t.convertToUint8ArrayIfNeeded=function(e){return"function"==typeof Buffer&&e instanceof Buffer?this.bufferToUint8Array(e):e},t.uint8ArrayToBuffer=function(e){if(Buffer.prototype instanceof Uint8Array){var t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);return Object.setPrototypeOf(t,Buffer.prototype),t}for(var r=e.length,n=new Buffer(r),o=0;o<r;o++)n[o]=e[o];return n},t.bufferToUint8Array=function(e){if(Buffer.prototype instanceof Uint8Array)return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);for(var t=e.length,r=new Uint8Array(t),n=0;n<t;n++)r[n]=e[n];return r},t}();e.ArrayTools=t}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(e){var t=function(){function t(){}return t.getCroppedBuffer=function(e,t,r,n){void 0===n&&(n=0);var o=new Uint8Array(r+n);return o.set(e.subarray(t,t+r)),o},t.getCroppedAndAppendedBuffer=function(t,r,n,o){return e.ArrayTools.joinByteArrays([t.subarray(r,r+n),o])},t.detectCompressionSourceEncoding=function(e){if(null==e)throw new TypeError("detectCompressionSourceEncoding: input is null or undefined");if("string"==typeof e)return"String";if(e instanceof Uint8Array||"function"==typeof Buffer&&Buffer.isBuffer(e))return"ByteArray";throw new TypeError("detectCompressionSourceEncoding: input must be of type 'string', 'Uint8Array' or 'Buffer'")},t.encodeCompressedBytes=function(t,r){switch(r){case"ByteArray":return t;case"Buffer":return e.ArrayTools.uint8ArrayToBuffer(t);case"BinaryString":return e.encodeBinaryString(t);case"Base64":return e.encodeBase64(t);default:throw new TypeError("encodeCompressedBytes: invalid output encoding requested")}},t.decodeCompressedData=function(t,r){if(null==r)throw new TypeError("decodeCompressedData: Input is null or undefined");switch(r){case"ByteArray":if(!(t instanceof Uint8Array))throw new TypeError("decodeCompressedData: ByteArray input type was specified but input is not a Uint8Array");return t;case"BinaryString":if("string"!=typeof t)throw new TypeError("decodeCompressedData: BinaryString input type was specified but input is not a string");return e.decodeBinaryString(t);case"Base64":if("string"!=typeof t)throw new TypeError("decodeCompressedData: Base64 input type was specified but input is not a string");return e.decodeBase64(t);default:throw new TypeError("decodeCompressedData: invalid input encoding '"+r+"' requested")}},t.encodeDecompressedBytes=function(t,r){switch(r){case"ByteArray":return t;case"Buffer":return e.ArrayTools.uint8ArrayToBuffer(t);case"String":return e.decodeUTF8(t);default:throw new TypeError("encodeDecompressedBytes: invalid output encoding requested")}},t}();e.CompressionCommon=t}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(e){var t=function(){function t(){}return t.enqueueImmediate=function(e){this.asyncFlushFunc||this.initializeScheduler(),this.queuedFunctions.push(e),1===this.queuedFunctions.length&&this.asyncFlushFunc()},t.initializeScheduler=function(){var t=this,r=function(){for(var r=0,n=t.queuedFunctions;r<n.length;r++){var o=n[r];try{o.call(void 0)}catch(t){e.printExceptionAndStackTraceToConsole(t,"enqueueImmediate exception")}}t.queuedFunctions.length=0};if(e.runningInNodeJS())this.asyncFlushFunc=function(){return setImmediate(function(){return r()})};else if("object"==typeof window&&"function"==typeof window.addEventListener&&"function"==typeof window.postMessage){var n="enqueueImmediate-"+Math.random().toString();window.addEventListener("message",function(e){e.data===n&&r()});var o;o=e.runningInNullOrigin()?"*":window.location.href,this.asyncFlushFunc=function(){return window.postMessage(n,o)}}else if("function"==typeof MessageChannel&&"function"==typeof MessagePort){var i=new MessageChannel;i.port1.onmessage=function(){return r()},this.asyncFlushFunc=function(){return i.port2.postMessage(0)}}else this.asyncFlushFunc=function(){return setTimeout(function(){return r()},0)}},t.queuedFunctions=[],t}();e.EventLoop=t,e.enqueueImmediate=function(e){return t.enqueueImmediate(e)}}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(e){var t=function(){function e(){}return e.overrideObject=function(e,t){if(null!=t)for(var r in t)e[r]=t[r];return e},e.findPropertyInObject=function(e,t){for(var r in t)if(t[r]===e)return r;return null},e}();e.ObjectTools=t}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(e){var t=function(){function e(){this.outputBuffer=new Array(1024),this.outputPosition=0,this.outputString=""}return e.prototype.append=function(e){this.outputBuffer[this.outputPosition++]=e,1024===this.outputPosition&&this.flushBufferToOutputString()},e.prototype.appendCodePoint=function(e){if(e<=65535)this.append(e);else{if(!(e<=1114111))throw new RangeError("StringBuilder.appendCodePoint: A code point of "+e+" cannot be encoded in UTF-16");this.append(55296+(e-65536>>>10)),this.append(56320+(e-65536&1023))}},e.prototype.toString=function(){return this.flushBufferToOutputString(),this.outputString},e.prototype.flushBufferToOutputString=function(){1024===this.outputPosition?this.outputString+=String.fromCharCode.apply(null,this.outputBuffer):this.outputString+=String.fromCharCode.apply(null,this.outputBuffer.slice(0,this.outputPosition)),this.outputPosition=0},e}();e.StringBuilder=t}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(e){var t=function(){function t(){this.restart()}return t.prototype.restart=function(){this.startTime=t.getTimestamp()},t.prototype.getElapsedTime=function(){return t.getTimestamp()-this.startTime},t.prototype.getElapsedTimeAndRestart=function(){var e=this.getElapsedTime();return this.restart(),e},t.prototype.logAndRestart=function(t,r){void 0===r&&(r=!0);var n=this.getElapsedTime(),o=t+": "+n.toFixed(3)+"ms";return e.log(o,r),this.restart(),n},t.getTimestamp=function(e){void 0===e&&(e=!0),this.timestampFunc||this.createGlobalTimestampFunction();var t=this.timestampFunc();return e?t:Math.floor(t)},t.createGlobalTimestampFunction=function(){if("object"==typeof chrome&&chrome.Interval){var e=Date.now(),t=new chrome.Interval;t.start(),this.timestampFunc=function(){return e+t.microseconds()/1e3}}else if("object"==typeof window&&window.performance&&window.performance.now){var r=Date.now()-window.performance.now();this.timestampFunc=function(){return r+window.performance.now()}}else if("object"==typeof process&&process.hrtime){var n=0;this.timestampFunc=function(){var e=process.hrtime(),t=1e3*e[0]+e[1]/1e6;return n+t},n=0,n=Date.now()-this.timestampFunc()}else Date.now?this.timestampFunc=function(){return Date.now()}:this.timestampFunc=function(){return(new Date).getTime()}},t}();e.Timer=t}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(e){var t=function(){function t(t){void 0===t&&(t=!0),this.MinimumSequenceLength=4,this.MaximumSequenceLength=31,this.MaximumMatchDistance=32767,this.PrefixHashTableSize=65537,this.inputBufferStreamOffset=1,this.reusableArraySegmentObject=new e.ArraySegment,t&&"function"==typeof Uint32Array?this.prefixHashTable=new e.CompressorCustomHashTable(this.PrefixHashTableSize):this.prefixHashTable=new e.CompressorSimpleHashTable(this.PrefixHashTableSize)}return t.prototype.compressBlock=function(t){if(void 0===t||null===t)throw new TypeError("compressBlock: undefined or null input received");return"string"==typeof t&&(t=e.encodeUTF8(t)),t=e.ArrayTools.convertToUint8ArrayIfNeeded(t),this.compressByteArrayBlock(t)},t.prototype.compressByteArrayBlock=function(e){if(!e||0==e.length)return new Uint8Array(0);var t=this.cropAndAddNewBytesToInputBuffer(e),r=this.inputBuffer,n=this.inputBuffer.length;this.outputBuffer=new Uint8Array(e.length),this.outputBufferPosition=0;for(var o=0,i=t;i<n;i++){var u=r[i],s=i<o;if(i>n-this.MinimumSequenceLength)s||this.outputRawByte(u);else{var a=this.getBucketIndexForPrefix(i);if(!s){var c=this.findLongestMatch(i,a);null!==c&&(this.outputPointerBytes(c.length,c.distance),o=i+c.length,s=!0)}s||this.outputRawByte(u);var f=this.inputBufferStreamOffset+i;this.prefixHashTable.addValueToBucket(a,f)}}return this.outputBuffer.subarray(0,this.outputBufferPosition)},t.prototype.findLongestMatch=function(e,t){var r=this.prefixHashTable.getArraySegmentForBucketIndex(t,this.reusableArraySegmentObject);if(null==r)return null;for(var n,o,i=this.inputBuffer,u=0;u<r.length;u++){var s=r.getInReversedOrder(u)-this.inputBufferStreamOffset,a=e-s,c=void 0;if(c=void 0===n?this.MinimumSequenceLength-1:n<128&&a>=128?o+(o>>>1):o,a>this.MaximumMatchDistance||c>=this.MaximumSequenceLength||e+c>=i.length)break;if(i[s+c]===i[e+c])for(var f=0;;f++){if(e+f===i.length||i[s+f]!==i[e+f]){f>c&&(n=a,o=f);break}if(f===this.MaximumSequenceLength)return{distance:a,length:this.MaximumSequenceLength}}}return void 0!==n?{distance:n,length:o}:null},t.prototype.getBucketIndexForPrefix=function(e){return(7880599*this.inputBuffer[e]+39601*this.inputBuffer[e+1]+199*this.inputBuffer[e+2]+this.inputBuffer[e+3])%this.PrefixHashTableSize},t.prototype.outputPointerBytes=function(e,t){t<128?(this.outputRawByte(192|e),this.outputRawByte(t)):(this.outputRawByte(224|e),this.outputRawByte(t>>>8),this.outputRawByte(255&t))},t.prototype.outputRawByte=function(e){this.outputBuffer[this.outputBufferPosition++]=e},t.prototype.cropAndAddNewBytesToInputBuffer=function(t){if(void 0===this.inputBuffer)return this.inputBuffer=t,0;var r=Math.min(this.inputBuffer.length,this.MaximumMatchDistance),n=this.inputBuffer.length-r;return this.inputBuffer=e.CompressionCommon.getCroppedAndAppendedBuffer(this.inputBuffer,n,r,t),this.inputBufferStreamOffset+=n,r},t.prototype.logStatisticsToConsole=function(t){var r=this.prefixHashTable.getUsedBucketCount(),n=this.prefixHashTable.getTotalElementCount();e.log("Compressed size: "+this.outputBufferPosition+"/"+t+" ("+(this.outputBufferPosition/t*100).toFixed(2)+"%)"),e.log("Occupied bucket count: "+r+"/"+this.PrefixHashTableSize),e.log("Total hashtable element count: "+n+" ("+(n/r).toFixed(2)+" elements per occupied bucket on average)"),e.log("")},t}();e.Compressor=t}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(e){var t=function(){function t(e){this.minimumBucketCapacity=4,this.maximumBucketCapacity=64,this.bucketLocators=new Uint32Array(2*e),this.storage=new Uint32Array(2*e),this.storageIndex=1}return t.prototype.addValueToBucket=function(t,r){t<<=1,this.storageIndex>=this.storage.length>>>1&&this.compact();var n,o=this.bucketLocators[t];if(0===o)o=this.storageIndex,n=1,this.storage[this.storageIndex]=r,this.storageIndex+=this.minimumBucketCapacity;else{n=this.bucketLocators[t+1],n===this.maximumBucketCapacity-1&&(n=this.truncateBucketToNewerElements(o,n,this.maximumBucketCapacity/2));var i=o+n;0===this.storage[i]?(this.storage[i]=r,i===this.storageIndex&&(this.storageIndex+=n)):(e.ArrayTools.copyElements(this.storage,o,this.storage,this.storageIndex,n),o=this.storageIndex,this.storageIndex+=n,this.storage[this.storageIndex++]=r,this.storageIndex+=n),n++}this.bucketLocators[t]=o,this.bucketLocators[t+1]=n},t.prototype.truncateBucketToNewerElements=function(t,r,n){var o=t+r-n;return e.ArrayTools.copyElements(this.storage,o,this.storage,t,n),e.ArrayTools.zeroElements(this.storage,t+n,r-n),n},t.prototype.compact=function(){var t=this.bucketLocators,r=this.storage;this.bucketLocators=new Uint32Array(this.bucketLocators.length),this.storageIndex=1;for(var n=0;n<t.length;n+=2){var o=t[n+1];0!==o&&(this.bucketLocators[n]=this.storageIndex,this.bucketLocators[n+1]=o,this.storageIndex+=Math.max(Math.min(2*o,this.maximumBucketCapacity),this.minimumBucketCapacity))}this.storage=new Uint32Array(8*this.storageIndex);for(var n=0;n<t.length;n+=2){var i=t[n];if(0!==i){var u=this.bucketLocators[n],s=this.bucketLocators[n+1];e.ArrayTools.copyElements(r,i,this.storage,u,s)}}},t.prototype.getArraySegmentForBucketIndex=function(t,r){t<<=1;var n=this.bucketLocators[t];return 0===n?null:(void 0===r&&(r=new e.ArraySegment),r.container=this.storage,r.startPosition=n,r.length=this.bucketLocators[t+1],r)},t.prototype.getUsedBucketCount=function(){return Math.floor(e.ArrayTools.countNonzeroValuesInArray(this.bucketLocators)/2)},t.prototype.getTotalElementCount=function(){for(var e=0,t=0;t<this.bucketLocators.length;t+=2)e+=this.bucketLocators[t+1];return e},t}();e.CompressorCustomHashTable=t}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(e){var t=function(){function t(e){this.maximumBucketCapacity=64,this.buckets=new Array(e)}return t.prototype.addValueToBucket=function(t,r){var n=this.buckets[t];void 0===n?this.buckets[t]=[r]:(n.length===this.maximumBucketCapacity-1&&e.ArrayTools.truncateStartingElements(n,this.maximumBucketCapacity/2),n.push(r))},t.prototype.getArraySegmentForBucketIndex=function(t,r){var n=this.buckets[t];return void 0===n?null:(void 0===r&&(r=new e.ArraySegment),r.container=n,r.startPosition=0,r.length=n.length,r)},t.prototype.getUsedBucketCount=function(){return e.ArrayTools.countNonzeroValuesInArray(this.buckets)},t.prototype.getTotalElementCount=function(){for(var e=0,t=0;t<this.buckets.length;t++)void 0!==this.buckets[t]&&(e+=this.buckets[t].length);return e},t}();e.CompressorSimpleHashTable=t}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(e){var t=function(){function t(){this.MaximumMatchDistance=32767,this.outputPosition=0}return t.prototype.decompressBlockToString=function(t){return t=e.ArrayTools.convertToUint8ArrayIfNeeded(t),e.decodeUTF8(this.decompressBlock(t))},t.prototype.decompressBlock=function(t){if(void 0===t||null===t)throw new TypeError("decompressBlock: undefined or null input received");t=e.ArrayTools.convertToUint8ArrayIfNeeded(t),this.inputBufferRemainder&&(t=e.ArrayTools.joinByteArrays([this.inputBufferRemainder,t]),this.inputBufferRemainder=void 0);for(var r=this.cropOutputBufferToWindowAndInitialize(Math.max(4*t.length,1024)),n=0,o=t.length;n<o;n++){var i=t[n];if(i>>>6==3){var u=i>>>5;if(n==o-1||n==o-2&&7==u){this.inputBufferRemainder=t.subarray(n);break}if(t[n+1]>>>7===1)this.outputByte(i);else{var s=31&i,a=void 0;6==u?(a=t[n+1],n+=1):(a=t[n+1]<<8|t[n+2],n+=2);for(var c=this.outputPosition-a,f=0;f<s;f++)this.outputByte(this.outputBuffer[c+f])}}else this.outputByte(i)}return this.rollBackIfOutputBufferEndsWithATruncatedMultibyteSequence(),e.CompressionCommon.getCroppedBuffer(this.outputBuffer,r,this.outputPosition-r)},t.prototype.outputByte=function(t){this.outputPosition===this.outputBuffer.length&&(this.outputBuffer=e.ArrayTools.doubleByteArrayCapacity(this.outputBuffer)),this.outputBuffer[this.outputPosition++]=t},t.prototype.cropOutputBufferToWindowAndInitialize=function(t){if(!this.outputBuffer)return this.outputBuffer=new Uint8Array(t),0;var r=Math.min(this.outputPosition,this.MaximumMatchDistance);if(this.outputBuffer=e.CompressionCommon.getCroppedBuffer(this.outputBuffer,this.outputPosition-r,r,t),this.outputPosition=r,this.outputBufferRemainder){for(var n=0;n<this.outputBufferRemainder.length;n++)this.outputByte(this.outputBufferRemainder[n]);this.outputBufferRemainder=void 0}return r},t.prototype.rollBackIfOutputBufferEndsWithATruncatedMultibyteSequence=function(){for(var e=1;e<=4&&this.outputPosition-e>=0;e++){var t=this.outputBuffer[this.outputPosition-e];if(e<4&&t>>>3===30||e<3&&t>>>4===14||e<2&&t>>>5===6)return this.outputBufferRemainder=this.outputBuffer.subarray(this.outputPosition-e,this.outputPosition),void(this.outputPosition-=e)}},t}();e.Decompressor=t}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(e){var t;!function(t){var r=function(){function r(){}return r.encode=function(r,n){if(void 0===n&&(n=!0),null==r)throw new TypeError("Base64.encode: invalid input type");if(0==r.length)return"";for(var o,i=t.Base64.charCodeMap,u=new e.StringBuilder,s=0,a=r.length;s<a;s+=3)s<=a-3?(o=r[s]<<16|r[s+1]<<8|r[s+2],u.append(i[o>>>18&63]),u.append(i[o>>>12&63]),u.append(i[o>>>6&63]),u.append(i[63&o]),o=0):s===a-2?(o=r[s]<<16|r[s+1]<<8,u.append(i[o>>>18&63]),u.append(i[o>>>12&63]),u.append(i[o>>>6&63]),n&&u.append(t.Base64.paddingCharCode)):s===a-1&&(o=r[s]<<16,u.append(i[o>>>18&63]),u.append(i[o>>>12&63]),n&&(u.append(t.Base64.paddingCharCode),u.append(t.Base64.paddingCharCode)));return u.toString()},r.decode=function(e,r){if("string"!=typeof e)throw new TypeError("Base64.decode: invalid input type");if(0===e.length)return new Uint8Array(0);var n=e.length%4;if(1===n)throw new Error("Invalid Base64 string: length % 4 == 1");2===n?e+=t.Base64.paddingCharacter+t.Base64.paddingCharacter:3===n&&(e+=t.Base64.paddingCharacter);var o=t.Base64.reverseCharCodeMap;r||(r=new Uint8Array(e.length));for(var i=0,u=e.length,s=0;s<u;s+=4){var a=o[e.charCodeAt(s)]<<18|o[e.charCodeAt(s+1)]<<12|o[e.charCodeAt(s+2)]<<6|o[e.charCodeAt(s+3)];r[i++]=a>>>16&255,r[i++]=a>>>8&255,r[i++]=255&a}return e.charAt(u-1)==t.Base64.paddingCharacter&&i--,e.charAt(u-2)==t.Base64.paddingCharacter&&i--,r.subarray(0,i)},r.paddingCharacter="=",r.charCodeMap=new Uint8Array([65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47]),r.paddingCharCode=61,r.reverseCharCodeMap=new Uint8Array([255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,255,255,255,255]),r}();t.Base64=r}(t=e.Encoding||(e.Encoding={}))}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(e){var t;!function(t){var r=function(){function t(){}return t.encode=function(t){if(null==t)throw new TypeError("BinaryString.encode: undefined or null input received");if(0===t.length)return"";for(var r=t.length,n=new e.StringBuilder,o=0,i=1,u=0;u<r;u+=2){var s=void 0;s=u==r-1?t[u]<<8:t[u]<<8|t[u+1],n.append(o<<16-i|s>>>i),o=s&(1<<i)-1,15===i?(n.append(o),o=0,i=1):i+=1,u>=r-2&&n.append(o<<16-i)}return n.append(32768|r%2),n.toString()},t.decode=function(e){if("string"!=typeof e)throw new TypeError("BinaryString.decode: invalid input type");if(""==e)return new Uint8Array(0);for(var t,r=new Uint8Array(3*e.length),n=0,o=function(e){r[n++]=e>>>8,r[n++]=255&e},i=0,u=0;u<e.length;u++){var s=e.charCodeAt(u);s>=32768?(32769==s&&n--,i=0):(0==i?t=s:(o(t<<i|s>>>15-i),t=s&(1<<15-i)-1),15==i?i=0:i+=1)}return r.subarray(0,n)},t}();t.BinaryString=r}(t=e.Encoding||(e.Encoding={}))}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(e){var t;!function(e){var t=function(){function t(){}return t.binaryBytesToDecimalString=function(t){for(var r=[],n=0;n<t.length;n++)r.push(e.Misc.binaryBytesToDecimalStringLookupTable[t[n]]);return r.join(" ")},t.binaryBytesToDecimalStringLookupTable=["000","001","002","003","004","005","006","007","008","009","010","011","012","013","014","015","016","017","018","019","020","021","022","023","024","025","026","027","028","029","030","031","032","033","034","035","036","037","038","039","040","041","042","043","044","045","046","047","048","049","050","051","052","053","054","055","056","057","058","059","060","061","062","063","064","065","066","067","068","069","070","071","072","073","074","075","076","077","078","079","080","081","082","083","084","085","086","087","088","089","090","091","092","093","094","095","096","097","098","099","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255"],t}();e.Misc=t}(t=e.Encoding||(e.Encoding={}))}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(e){var t;!function(t){var r=function(){function r(){}return r.encode=function(e,r){if("string"!=typeof e)throw new TypeError("UTF8.encode: null, undefined or invalid input type");if(0==e.length)return new Uint8Array(0);r||(r=new Uint8Array(4*e.length));for(var n=0,o=0;o<e.length;o++){var i=t.UTF8.getUnicodeCodePoint(e,o);if(i<128)r[n++]=i;else if(i<2048)r[n++]=192|i>>>6,r[n++]=128|63&i;else if(i<65536)r[n++]=224|i>>>12,r[n++]=128|i>>>6&63,r[n++]=128|63&i;else{if(!(i<1114112))throw new Error("UTF8.encode: Invalid UTF-16 string: Encountered a character unsupported by UTF-8/16 (RFC 3629)");r[n++]=240|i>>>18,r[n++]=128|i>>>12&63,r[n++]=128|i>>>6&63,r[n++]=128|63&i,o++}}return r.subarray(0,n)},r.decode=function(t){if(null==t)throw new TypeError("UTF8.decode: null or undefined input type recieved");if(0==t.length)return"";for(var r,n,o=new e.StringBuilder,i=0,u=t.length;i<u;){if(n=t[i],n>>>7===0)r=n,i+=1;else if(n>>>5===6){if(i+1>=u)throw new Error("UTF8.decode: Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+i);r=(31&n)<<6|63&t[i+1],i+=2}else if(n>>>4===14){if(i+2>=u)throw new Error("UTF8.decode: Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+i);r=(15&n)<<12|(63&t[i+1])<<6|63&t[i+2],i+=3}else{if(n>>>3!==30)throw new Error("UTF8.decode: Invalid UTF-8 stream: An invalid lead byte value encountered at position "+i);if(i+3>=u)throw new Error("UTF8.decode: Invalid UTF-8 stream: Truncated codepoint sequence encountered at position "+i);r=(7&n)<<18|(63&t[i+1])<<12|(63&t[i+2])<<6|63&t[i+3],i+=4}o.appendCodePoint(r)}return o.toString()},r.getUnicodeCodePoint=function(e,t){var r=e.charCodeAt(t);if(r<55296||r>56319)return r;var n=e.charCodeAt(t+1);if(n>=56320&&n<=57343)return 65536+((r-55296<<10)+(n-56320));
throw new Error("getUnicodeCodePoint: Received a lead surrogate character not followed by a trailing one")},r.getStringFromUnicodeCodePoint=function(e){if(e<=65535)return String.fromCharCode(e);if(e<=1114111)return String.fromCharCode(55296+(e-65536>>>10),56320+(e-65536&1023));throw new Error("getStringFromUnicodeCodePoint: A code point of "+e+" cannot be encoded in UTF-16")},r}();t.UTF8=r}(t=e.Encoding||(e.Encoding={}))}(LZUTF8||(LZUTF8={}));var LZUTF8;!function(e){function t(t,r){if(null==t)throw new TypeError("compress: undefined or null input received");t=e.ArrayTools.convertToUint8ArrayIfNeeded(t),r=e.ObjectTools.overrideObject({outputEncoding:"ByteArray"},r);var n=new e.Compressor,o=n.compressBlock(t);return e.CompressionCommon.encodeCompressedBytes(o,r.outputEncoding)}function r(t,r){if(null==t)throw new TypeError("decompress: undefined or null input received");t=e.ArrayTools.convertToUint8ArrayIfNeeded(t),r=e.ObjectTools.overrideObject({inputEncoding:"ByteArray",outputEncoding:"String"},r),t=e.CompressionCommon.decodeCompressedData(t,r.inputEncoding);var n=new e.Decompressor,o=n.decompressBlock(t);return e.CompressionCommon.encodeDecompressedBytes(o,r.outputEncoding)}function n(t,r,n){null==n&&(n=function(){}),t=e.ArrayTools.convertToUint8ArrayIfNeeded(t);var o;try{o=e.CompressionCommon.detectCompressionSourceEncoding(t)}catch(e){return void n(void 0,e)}var i={inputEncoding:o,outputEncoding:"ByteArray",useWebWorker:!0,blockSize:65536};r=e.ObjectTools.overrideObject(i,r),e.enqueueImmediate(function(){r.useWebWorker===!0&&e.WebWorker.isSupported()?(e.WebWorker.createGlobalWorkerIfItDoesntExist(),e.WebWorker.compressAsync(t,r,n)):e.AsyncCompressor.compressAsync(t,r,n)})}function o(t,r,n){if(null==n&&(n=function(){}),void 0===t||null===t)return void n(void 0,new TypeError("decompressAsync: undefined or null input received"));t=e.ArrayTools.convertToUint8ArrayIfNeeded(t);var o={inputEncoding:"ByteArray",outputEncoding:"String",useWebWorker:!0,blockSize:65536};r=e.ObjectTools.overrideObject(o,r),e.EventLoop.enqueueImmediate(function(){r.useWebWorker===!0&&e.WebWorker.isSupported()?(e.WebWorker.createGlobalWorkerIfItDoesntExist(),e.WebWorker.decompressAsync(t,r,n)):e.AsyncDecompressor.decompressAsync(t,r,n)})}function i(){return e.AsyncCompressor.createCompressionStream()}function u(){return e.AsyncDecompressor.createDecompressionStream()}function s(t){if("string"!=typeof t)throw new TypeError("encodeUTF8: null, undefined or invalid input type received");return e.runningInNodeJS()?e.ArrayTools.bufferToUint8Array(new Buffer(t,"utf8")):"function"==typeof TextEncoder?(void 0===l&&(l=new TextEncoder("utf-8")),l.encode(t)):e.Encoding.UTF8.encode(t)}function a(t){if(null==t)throw new TypeError("decodeUTF8: undefined or null input received");if(e.runningInNodeJS()){var r=void 0;if(t instanceof Uint8Array)r=e.ArrayTools.uint8ArrayToBuffer(t);else{if(!(t instanceof Buffer))throw new TypeError("decodeUTF8: invalid input type");r=t}return r.toString("utf8")}return"function"==typeof TextDecoder?(void 0===h&&(h=new TextDecoder("utf-8")),h.decode(t)):e.Encoding.UTF8.decode(t)}function c(t){if(null==t)throw new TypeError("encodeBase64: undefined or null input received");if(e.runningInNodeJS()){var r=void 0;if(t instanceof Uint8Array)r=e.ArrayTools.uint8ArrayToBuffer(t);else{if(!(t instanceof Buffer))throw new TypeError("encodeBase64: invalid input type");r=t}var n=r.toString("base64");if(null==n)throw new Error("encodeBase64: failed encdoing Base64");return n}return e.Encoding.Base64.encode(t)}function f(t){if("string"!=typeof t)throw new TypeError("decodeBase64: invalid input type received");if(e.runningInNodeJS()){var r=e.ArrayTools.bufferToUint8Array(new Buffer(t,"base64"));if(null===r)throw new Error("decodeBase64: failed decoding Base64");return r}return e.Encoding.Base64.decode(t)}function d(t){return t=e.ArrayTools.convertToUint8ArrayIfNeeded(t),e.Encoding.BinaryString.encode(t)}function p(t){return e.Encoding.BinaryString.decode(t)}e.compress=t,e.decompress=r,e.compressAsync=n,e.decompressAsync=o,e.createCompressionStream=i,e.createDecompressionStream=u;var l,h;e.encodeUTF8=s,e.decodeUTF8=a,e.encodeBase64=c,e.decodeBase64=f,e.encodeBinaryString=d,e.decodeBinaryString=p}(LZUTF8||(LZUTF8={}));


}).call(this,require('_process'),require("buffer").Buffer)
},{"_process":51,"buffer":44,"stream":63}],27:[function(require,module,exports){
"use strict";function mapEach(t,e){for(var r,n=t.keys();!(r=n.next()).done;)e(t.get(r.value),r.value,t)}var Multimap=function(){function t(e){var n=this;n._map=r,t.Map&&(n._map=t.Map),n._=n._map?new n._map:{},e&&e.forEach(function(t){n.set(t[0],t[1])})}function e(t){if(Array.isArray(t)){var r=0;return{next:function(){return r<t.length?{value:t[r++],done:!1}:{done:!0}}}}return!t.next&&n&&(t.next=n(t,e)),t}var r;"undefined"!=typeof Map&&(r=Map,Map.prototype.keys||(Map.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),t})),t.prototype.get=function(t){return this._map?this._.get(t):this._[t]},t.prototype.set=function(t,e){var r=Array.prototype.slice.call(arguments);t=r.shift();var n=this.get(t);return n||(n=[],this._map?this._.set(t,n):this._[t]=n),Array.prototype.push.apply(n,r),this},t.prototype.delete=function(t,e){if(!this.has(t))return!1;if(1==arguments.length)return this._map?this._.delete(t):delete this._[t],!0;var r=this.get(t),n=r.indexOf(e);return n!=-1&&(r.splice(n,1),!0)},t.prototype.has=function(t,e){var r=this._map?this._.has(t):this._.hasOwnProperty(t);if(1==arguments.length||!r)return r;var n=this.get(t)||[];return n.indexOf(e)!=-1},t.prototype.keys=function(){return e(this._map?this._.keys():Object.keys(this._))},t.prototype.values=function(){var t=[];return this.forEachEntry(function(e){Array.prototype.push.apply(t,e)}),e(t)},t.prototype.forEachEntry=function(t){mapEach(this,t)},t.prototype.forEach=function(t){var e=this;e.forEachEntry(function(r,n){r.forEach(function(r){t(r,n,e)})})},t.prototype.clear=function(){this._map?this._.clear():this._={}},Object.defineProperty(t.prototype,"size",{configurable:!1,enumerable:!0,get:function(){var t=0;return mapEach(this,function(e){t+=e.length}),t}});var n;try{n=new Function("iterator","makeIterator","var keysArray = []; for(var key of iterator){keysArray.push(key);} return makeIterator(keysArray).next;")}catch(t){}return t}();"object"==typeof exports&&module&&module.exports?module.exports=Multimap:"function"==typeof define&&define.amd&&define(function(){return Multimap});


},{}],28:[function(require,module,exports){
var supportedTypes=["text","search","tel","url","password"];module.exports=function(e){return!(!e.setSelectionRange||!~supportedTypes.indexOf(e.type))};


},{}],29:[function(require,module,exports){
!function(){"use strict";var e={};e.parse=function(e){return"string"!=typeof e?{}:(e=e.trim().replace(/^(\?|#)/,""),e?e.trim().split("&").reduce(function(e,n){var o=n.replace(/\+/g," ").split("="),r=o[0],t=o[1];return r=decodeURIComponent(r),t=void 0===t?null:decodeURIComponent(t),e.hasOwnProperty(r)?Array.isArray(e[r])?e[r].push(t):e[r]=[e[r],t]:e[r]=t,e},{}):{})},e.stringify=function(e){return e?Object.keys(e).map(function(n){var o=e[n];return Array.isArray(o)?o.map(function(e){return encodeURIComponent(n)+"="+encodeURIComponent(e)}).join("&"):encodeURIComponent(n)+"="+encodeURIComponent(o)}).join("&"):""},"function"==typeof define&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports?module.exports=e:self.queryString=e}();


},{}],30:[function(require,module,exports){
module.exports=function(t,e){return t===e||typeof t==typeof e&&("object"!=typeof t||t instanceof Date&&e instanceof Date)&&String(t)===String(e)};


},{}],31:[function(require,module,exports){
var naturalSelection=require("natural-selection");module.exports=function(e,t){var n=naturalSelection(e)&&e===document.activeElement;if(n){var a=e.selectionStart,l=e.selectionEnd;e.value=t,e.setSelectionRange(a,l)}else e.value=t};


},{"natural-selection":28}],32:[function(require,module,exports){
function tryParseJson(t){try{return JSON.parse(t)}catch(t){return t}}function timeout(){this.request.abort(),this.emit("timeout")}function Ajax(t){var e,s=this;if("string"==typeof t&&(t={url:t}),"object"!=typeof t&&(t={}),s.settings=t,s.request=new XMLHttpRequest,s.settings.method=s.settings.method||"get",s.settings.cors&&!1 in s.request&&("undefined"!=typeof XDomainRequest?s.request=new XDomainRequest:s.emit("error",new Error("Cors is not supported by this browser"))),s.settings.cache===!1&&(s.settings.data=s.settings.data||{},s.settings.data._=(new Date).getTime()),"get"===s.settings.method.toLowerCase()&&"object"==typeof s.settings.data){var r=s.settings.url.split("?");e=queryString.parse(r[1]);for(var n in s.settings.data)e[n]=s.settings.data[n];var i=queryString.stringify(e);s.settings.url=r[0]+(i?"?"+i:""),s.settings.data=null}s.request.addEventListener("progress",function(t){s.emit("progress",t)},!1),s.request.addEventListener("load",function(t){var e=t.target.responseText;if(s.settings.dataType&&"json"===s.settings.dataType.toLowerCase())if(""===e)e=void 0;else if(e=tryParseJson(e),e instanceof Error)return void s.emit("error",t,e);t.target.status>=400?s.emit("error",t,e):s.emit("success",t,e)},!1),s.request.addEventListener("error",function(t){s.emit("error",t)},!1),s.request.addEventListener("abort",function(t){s.emit("error",t,new Error("Connection Aborted")),s.emit("abort",t)},!1),s.request.addEventListener("loadend",function(t){clearTimeout(s._requestTimeout),s.emit("complete",t)},!1),s.request.open(s.settings.method||"get",s.settings.url,!0),s.settings.cors&&"withCredentials"in s.request&&(s.request.withCredentials=!!t.withCredentials),s.settings.contentType!==!1&&s.request.setRequestHeader("Content-Type",s.settings.contentType||"application/json; charset=utf-8"),s.settings.requestedWith!==!1&&s.request.setRequestHeader("X-Requested-With",s.settings.requestedWith||"XMLHttpRequest"),s.settings.auth&&s.request.setRequestHeader("Authorization",s.settings.auth);for(var o in s.settings.headers)s.request.setRequestHeader(o,s.settings.headers[o]);s.settings.processData!==!1&&"json"===s.settings.dataType&&(s.settings.data=JSON.stringify(s.settings.data))}var EventEmitter=require("events").EventEmitter,queryString=require("query-string");Ajax.prototype=Object.create(EventEmitter.prototype),Ajax.prototype.send=function(){var t=this;t._requestTimeout=setTimeout(function(){timeout.apply(t,[])},t.settings.timeout||12e4),t.request.send(t.settings.data&&t.settings.data)},module.exports=Ajax;


},{"events":48,"query-string":29}],33:[function(require,module,exports){
function keysAreDifferent(e,t){if(e!==t){if(!e||!t||e.length!==t.length)return!0;for(var r=0;r<e.length;r++)if(!~t.indexOf(e[r]))return!0}}function getKeys(e){if(e&&"object"==typeof e)return Object.keys(e)}function WhatChanged(e,t){if(this._changesToTrack={},null==t&&(t="value type keys structure reference"),"string"!=typeof t)throw"changesToTrack must be of type string";t=t.split(" ");for(var r=0;r<t.length;r++)this._changesToTrack[t[r]]=!0;this.update(e)}var clone=require("clone"),deepEqual=require("cyclic-deep-equal");WhatChanged.prototype.update=function(e){var t={},r=this._changesToTrack,n=getKeys(e);if("value"in r&&e+""!=this._lastReference+""&&(t.value=!0),("type"in r&&typeof e!=typeof this._lastValue||(null===e||null===this._lastValue)&&this.value!==this._lastValue)&&(t.type=!0),"keys"in r&&keysAreDifferent(this._lastKeys,getKeys(e))&&(t.keys=!0),null!==e&&"object"==typeof e||"function"==typeof e){var s=this._lastValue;"shallowStructure"in r&&(!s||"object"!=typeof s||Object.keys(e).some(function(t,r){return e[t]!==s[t]}))&&(t.shallowStructure=!0),"structure"in r&&!deepEqual(e,s)&&(t.structure=!0),"reference"in r&&e!==this._lastReference&&(t.reference=!0)}return this._lastValue="structure"in r?clone(e):"shallowStructure"in r?clone(e,!0,1):e,this._lastReference=e,this._lastKeys=n,t},module.exports=WhatChanged;


},{"clone":2,"cyclic-deep-equal":4}],34:[function(require,module,exports){
function loadFromHash(){try{var e=window.location.hash.slice(1);e=e.slice(-compressionSuffix.length)===compressionSuffix?lzutf8.decompress(e.slice(0,-compressionSuffix.length),{inputEncoding:"Base64",outputEncoding:"String"}):atob(window.location.hash.slice(1)),e=JSON.parse(e),e!==code()&&code(e)}catch(e){}}var fastn=require("./fastn"),cpjax=require("cpjax"),lzutf8=require("lzutf8"),compressionSuffix="-lzutf8",defaultCode,codeModel={code:""},result=fastn.binding("result").attach(codeModel),errors=fastn.binding("errors").attach(codeModel),code=fastn.binding("code").attach(codeModel).on("change",function(e){var o,t=document.createElement("div");try{o=new Function("fastn","document",e)(fastn,{body:t}),result(o||t),errors(null)}catch(e){errors(e)}var r=JSON.stringify(e);localStorage.setItem("fastnTryCode",r),window.location.hash="#"+lzutf8.compress(r,{outputEncoding:"Base64"})+compressionSuffix}),storedCode;window.addEventListener("hashchange",loadFromHash),loadFromHash();try{storedCode=JSON.parse(localStorage.getItem("fastnTryCode"))}catch(e){}code(storedCode||""),cpjax("./demo.js",function(e,o){return e?void errors(e):(storedCode||code(o),void(defaultCode=o))}),module.exports={codeModel:codeModel,code:code,result:result,errors:errors,reset:function(){code(defaultCode)}};


},{"./fastn":37,"cpjax":3,"lzutf8":26}],35:[function(require,module,exports){
module.exports=window.CodeMirror;


},{}],36:[function(require,module,exports){
var fastn=require("./fastn"),CodeMirror=require("./codeMirror"),laidout=require("laidout"),codeService=require("./code");module.exports=function(){return fastn("div",{class:fastn.binding(codeService.errors,function(e){return["code",e?"hasError":""]})},require("./preamble")()).on("render",function(){var e=CodeMirror(this.element,{lineNumbers:!0,value:codeService.code()});e.on("change",function(r){codeService.code(e.getValue())}),codeService.code.on("change",function(r){e.getValue()!==r&&e.setValue(r)}),laidout(this.element,function(){e.refresh()})})};


},{"./code":34,"./codeMirror":35,"./fastn":37,"./preamble":42,"laidout":25}],37:[function(require,module,exports){
module.exports=require("fastn")({list:require("fastn/listComponent"),templater:require("fastn/templaterComponent"),text:require("fastn/textComponent"),_generic:require("fastn/genericComponent")},!0);


},{"fastn":12,"fastn/genericComponent":11,"fastn/listComponent":14,"fastn/templaterComponent":20,"fastn/textComponent":21}],38:[function(require,module,exports){
var fastn=require("./fastn");module.exports=function(){return fastn("div",{class:"github-fork-ribbon-wrapper right"},fastn("div",{class:"github-fork-ribbon"},fastn("a",{href:"https://github.com/KoryNunn/fastn/tree/gh-pages/try"},"Fork me")))};


},{"./fastn":37}],39:[function(require,module,exports){
var fastn=require("./fastn"),codeService=require("./code");module.exports=function(){return fastn("header",fastn("img",{src:"../images/fastn-sml.png"}),fastn("h1","Fastn try-er.."),fastn("button",{class:"reset"},"Reset").on("click",codeService.reset),fastn("div",{class:"errors"},codeService.errors))};


},{"./code":34,"./fastn":37}],40:[function(require,module,exports){
var fastn=require("./fastn"),app=fastn("div",require("./header")(),require("./codeView")(),require("./outputView")(),require("./forkBanner")());app.render(),window.onload=function(){document.body.appendChild(app.element)};
},{"./codeView":36,"./fastn":37,"./forkBanner":38,"./header":39,"./outputView":41}],41:[function(require,module,exports){
var fastn=require("./fastn"),codeService=require("./code");module.exports=function(){function e(e){r.empty(),r.insert(e)}var r=fastn("div",{class:"output"});return codeService.result.on("change",e),e(codeService.result()||"No output.."),r};


},{"./code":34,"./fastn":37}],42:[function(require,module,exports){
var fastn=require("./fastn"),CodeMirror=require("./codeMirror"),codeService=require("./code"),cpjax=require("cpjax");module.exports=function(){var e=fastn.binding("state").attach();return fastn("div",{class:fastn.binding(e,function(e){return["preamble",e?"expanded":""]})},fastn("span","Fastn setup. Click to view").on("click",function(){e(!0)})).on("render",function(){var n=CodeMirror(this.element,{lineNumbers:!0,readonly:!0});cpjax("./fastn.js",function(e,r){n.setValue(r)}),e.on("change",function(){n.refresh(),n.focus()}),n.on("blur",function(){e(!1)})})};


},{"./code":34,"./codeMirror":35,"./fastn":37,"cpjax":3}],43:[function(require,module,exports){



},{}],44:[function(require,module,exports){
function Buffer(t){return this instanceof Buffer?(this.length=0,this.parent=void 0,"number"==typeof t?fromNumber(this,t):"string"==typeof t?fromString(this,t,arguments.length>1?arguments[1]:"utf8"):fromObject(this,t)):arguments.length>1?new Buffer(t,arguments[1]):new Buffer(t)}function fromNumber(t,e){if(t=allocate(t,e<0?0:0|checked(e)),!Buffer.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;r++)t[r]=0;return t}function fromString(t,e,r){"string"==typeof r&&""!==r||(r="utf8");var n=0|byteLength(e,r);return t=allocate(t,n),t.write(e,r),t}function fromObject(t,e){if(Buffer.isBuffer(e))return fromBuffer(t,e);if(isArray(e))return fromArray(t,e);if(null==e)throw new TypeError("must start with number, buffer, array or string");return"undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer?fromTypedArray(t,e):e.length?fromArrayLike(t,e):fromJsonObject(t,e)}function fromBuffer(t,e){var r=0|checked(e.length);return t=allocate(t,r),e.copy(t,0,0,r),t}function fromArray(t,e){var r=0|checked(e.length);t=allocate(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function fromTypedArray(t,e){var r=0|checked(e.length);t=allocate(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function fromArrayLike(t,e){var r=0|checked(e.length);t=allocate(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function fromJsonObject(t,e){var r,n=0;"Buffer"===e.type&&isArray(e.data)&&(r=e.data,n=0|checked(r.length)),t=allocate(t,n);for(var i=0;i<n;i+=1)t[i]=255&r[i];return t}function allocate(t,e){Buffer.TYPED_ARRAY_SUPPORT?t=Buffer._augment(new Uint8Array(e)):(t.length=e,t._isBuffer=!0);var r=0!==e&&e<=Buffer.poolSize>>>1;return r&&(t.parent=rootParent),t}function checked(t){if(t>=kMaxLength)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength.toString(16)+" bytes");return 0|t}function SlowBuffer(t,e){if(!(this instanceof SlowBuffer))return new SlowBuffer(t,e);var r=new Buffer(t,e);return delete r.parent,r}function byteLength(t,e){if("string"!=typeof t&&(t=String(t)),0===t.length)return 0;switch(e||"utf8"){case"ascii":case"binary":case"raw":return t.length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*t.length;case"hex":return t.length>>>1;case"utf8":case"utf-8":return utf8ToBytes(t).length;case"base64":return base64ToBytes(t).length;default:return t.length}}function hexWrite(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var f=e.length;if(f%2!==0)throw new Error("Invalid hex string");n>f/2&&(n=f/2);for(var o=0;o<n;o++){var u=parseInt(e.substr(2*o,2),16);if(isNaN(u))throw new Error("Invalid hex string");t[r+o]=u}return o}function utf8Write(t,e,r,n){return blitBuffer(utf8ToBytes(e,t.length-r),t,r,n)}function asciiWrite(t,e,r,n){return blitBuffer(asciiToBytes(e),t,r,n)}function binaryWrite(t,e,r,n){return asciiWrite(t,e,r,n)}function base64Write(t,e,r,n){return blitBuffer(base64ToBytes(e),t,r,n)}function ucs2Write(t,e,r,n){return blitBuffer(utf16leToBytes(e,t.length-r),t,r,n)}function base64Slice(t,e,r){return 0===e&&r===t.length?base64.fromByteArray(t):base64.fromByteArray(t.slice(e,r))}function utf8Slice(t,e,r){var n="",i="";r=Math.min(t.length,r);for(var f=e;f<r;f++)t[f]<=127?(n+=decodeUtf8Char(i)+String.fromCharCode(t[f]),i=""):i+="%"+t[f].toString(16);return n+decodeUtf8Char(i)}function asciiSlice(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;i++)n+=String.fromCharCode(127&t[i]);return n}function binarySlice(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;i++)n+=String.fromCharCode(t[i]);return n}function hexSlice(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",f=e;f<r;f++)i+=toHex(t[f]);return i}function utf16leSlice(t,e,r){for(var n=t.slice(e,r),i="",f=0;f<n.length;f+=2)i+=String.fromCharCode(n[f]+256*n[f+1]);return i}function checkOffset(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function checkInt(t,e,r,n,i,f){if(!Buffer.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>i||e<f)throw new RangeError("value is out of bounds");if(r+n>t.length)throw new RangeError("index out of range")}function objectWriteUInt16(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,f=Math.min(t.length-r,2);i<f;i++)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function objectWriteUInt32(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,f=Math.min(t.length-r,4);i<f;i++)t[r+i]=e>>>8*(n?i:3-i)&255}function checkIEEE754(t,e,r,n,i,f){if(e>i||e<f)throw new RangeError("value is out of bounds");if(r+n>t.length)throw new RangeError("index out of range");if(r<0)throw new RangeError("index out of range")}function writeFloat(t,e,r,n,i){return i||checkIEEE754(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),ieee754.write(t,e,r,n,23,4),r+4}function writeDouble(t,e,r,n,i){return i||checkIEEE754(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),ieee754.write(t,e,r,n,52,8),r+8}function base64clean(t){if(t=stringtrim(t).replace(INVALID_BASE64_RE,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function stringtrim(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function toHex(t){return t<16?"0"+t.toString(16):t.toString(16)}function utf8ToBytes(t,e){e=e||1/0;for(var r,n=t.length,i=null,f=[],o=0;o<n;o++){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&f.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&f.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&f.push(239,191,189),i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&((e-=3)>-1&&f.push(239,191,189),i=null);if(r<128){if((e-=1)<0)break;f.push(r)}else if(r<2048){if((e-=2)<0)break;f.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;f.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<2097152))throw new Error("Invalid code point");if((e-=4)<0)break;f.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return f}function asciiToBytes(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e}function utf16leToBytes(t,e){for(var r,n,i,f=[],o=0;o<t.length&&!((e-=2)<0);o++)r=t.charCodeAt(o),n=r>>8,i=r%256,f.push(i),f.push(n);return f}function base64ToBytes(t){return base64.toByteArray(base64clean(t))}function blitBuffer(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);i++)e[i+r]=t[i];return i}function decodeUtf8Char(t){try{return decodeURIComponent(t)}catch(t){return String.fromCharCode(65533)}}var base64=require("base64-js"),ieee754=require("ieee754"),isArray=require("is-array");exports.Buffer=Buffer,exports.SlowBuffer=SlowBuffer,exports.INSPECT_MAX_BYTES=50,Buffer.poolSize=8192;var kMaxLength=1073741823,rootParent={};Buffer.TYPED_ARRAY_SUPPORT=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(t){return!1}}(),Buffer.isBuffer=function(t){return!(null==t||!t._isBuffer)},Buffer.compare=function(t,e){if(!Buffer.isBuffer(t)||!Buffer.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,f=Math.min(r,n);i<f&&t[i]===e[i];)++i;return i!==f&&(r=t[i],n=e[i]),r<n?-1:n<r?1:0},Buffer.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(t,e){if(!isArray(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new Buffer(0);if(1===t.length)return t[0];var r;if(void 0===e)for(e=0,r=0;r<t.length;r++)e+=t[r].length;var n=new Buffer(e),i=0;for(r=0;r<t.length;r++){var f=t[r];f.copy(n,i),i+=f.length}return n},Buffer.byteLength=byteLength,Buffer.prototype.length=void 0,Buffer.prototype.parent=void 0,Buffer.prototype.toString=function(t,e,r){var n=!1;if(e=0|e,r=void 0===r||r===1/0?this.length:0|r,t||(t="utf8"),e<0&&(e=0),r>this.length&&(r=this.length),r<=e)return"";for(;;)switch(t){case"hex":return hexSlice(this,e,r);case"utf8":case"utf-8":return utf8Slice(this,e,r);case"ascii":return asciiSlice(this,e,r);case"binary":return binarySlice(this,e,r);case"base64":return base64Slice(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}},Buffer.prototype.equals=function(t){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===Buffer.compare(this,t)},Buffer.prototype.inspect=function(){var t="",e=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},Buffer.prototype.compare=function(t){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:Buffer.compare(this,t)},Buffer.prototype.indexOf=function(t,e){function r(t,e,r){for(var n=-1,i=0;r+i<t.length;i++)if(t[r+i]===e[n===-1?0:i-n]){if(n===-1&&(n=i),i-n+1===e.length)return r+n}else n=-1;return-1}if(e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e>>=0,0===this.length)return-1;if(e>=this.length)return-1;if(e<0&&(e=Math.max(this.length+e,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,e);if(Buffer.isBuffer(t))return r(this,t,e);if("number"==typeof t)return Buffer.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,e):r(this,[t],e);throw new TypeError("val must be string, number or Buffer")},Buffer.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},Buffer.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},Buffer.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else if(isFinite(e))e=0|e,isFinite(r)?(r=0|r,void 0===n&&(n="utf8")):(n=r,r=void 0);else{var i=n;n=e,e=0|r,r=i}var f=this.length-e;if((void 0===r||r>f)&&(r=f),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return hexWrite(this,t,e,r);case"utf8":case"utf-8":return utf8Write(this,t,e,r);case"ascii":return asciiWrite(this,t,e,r);case"binary":return binaryWrite(this,t,e,r);case"base64":return base64Write(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},Buffer.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),e<t&&(e=t);var n;if(Buffer.TYPED_ARRAY_SUPPORT)n=Buffer._augment(this.subarray(t,e));else{var i=e-t;n=new Buffer(i,void 0);for(var f=0;f<i;f++)n[f]=this[f+t]}return n.length&&(n.parent=this.parent||this),n},Buffer.prototype.readUIntLE=function(t,e,r){t=0|t,e=0|e,r||checkOffset(t,e,this.length);for(var n=this[t],i=1,f=0;++f<e&&(i*=256);)n+=this[t+f]*i;return n},Buffer.prototype.readUIntBE=function(t,e,r){t=0|t,e=0|e,r||checkOffset(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},Buffer.prototype.readUInt8=function(t,e){return e||checkOffset(t,1,this.length),this[t]},Buffer.prototype.readUInt16LE=function(t,e){return e||checkOffset(t,2,this.length),this[t]|this[t+1]<<8},Buffer.prototype.readUInt16BE=function(t,e){return e||checkOffset(t,2,this.length),this[t]<<8|this[t+1]},Buffer.prototype.readUInt32LE=function(t,e){return e||checkOffset(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},Buffer.prototype.readUInt32BE=function(t,e){return e||checkOffset(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},Buffer.prototype.readIntLE=function(t,e,r){t=0|t,e=0|e,r||checkOffset(t,e,this.length);for(var n=this[t],i=1,f=0;++f<e&&(i*=256);)n+=this[t+f]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},Buffer.prototype.readIntBE=function(t,e,r){t=0|t,e=0|e,r||checkOffset(t,e,this.length);for(var n=e,i=1,f=this[t+--n];n>0&&(i*=256);)f+=this[t+--n]*i;return i*=128,f>=i&&(f-=Math.pow(2,8*e)),f},Buffer.prototype.readInt8=function(t,e){return e||checkOffset(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},Buffer.prototype.readInt16LE=function(t,e){e||checkOffset(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt16BE=function(t,e){e||checkOffset(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt32LE=function(t,e){return e||checkOffset(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},Buffer.prototype.readInt32BE=function(t,e){return e||checkOffset(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},Buffer.prototype.readFloatLE=function(t,e){return e||checkOffset(t,4,this.length),ieee754.read(this,t,!0,23,4)},Buffer.prototype.readFloatBE=function(t,e){return e||checkOffset(t,4,this.length),ieee754.read(this,t,!1,23,4)},Buffer.prototype.readDoubleLE=function(t,e){return e||checkOffset(t,8,this.length),ieee754.read(this,t,!0,52,8)},Buffer.prototype.readDoubleBE=function(t,e){return e||checkOffset(t,8,this.length),ieee754.read(this,t,!1,52,8)},Buffer.prototype.writeUIntLE=function(t,e,r,n){t=+t,e=0|e,r=0|r,n||checkInt(this,t,e,r,Math.pow(2,8*r),0);var i=1,f=0;for(this[e]=255&t;++f<r&&(i*=256);)this[e+f]=t/i&255;return e+r},Buffer.prototype.writeUIntBE=function(t,e,r,n){t=+t,e=0|e,r=0|r,n||checkInt(this,t,e,r,Math.pow(2,8*r),0);var i=r-1,f=1;for(this[e+i]=255&t;--i>=0&&(f*=256);)this[e+i]=t/f&255;return e+r},Buffer.prototype.writeUInt8=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=t,e+1},Buffer.prototype.writeUInt16LE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeUInt16BE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeUInt32LE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeUInt32BE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e=0|e,!n){var i=Math.pow(2,8*r-1);checkInt(this,t,e,r,i-1,-i)}var f=0,o=1,u=t<0?1:0;for(this[e]=255&t;++f<r&&(o*=256);)this[e+f]=(t/o>>0)-u&255;return e+r},Buffer.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e=0|e,!n){var i=Math.pow(2,8*r-1);checkInt(this,t,e,r,i-1,-i)}var f=r-1,o=1,u=t<0?1:0;for(this[e+f]=255&t;--f>=0&&(o*=256);)this[e+f]=(t/o>>0)-u&255;return e+r},Buffer.prototype.writeInt8=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=t,e+1},Buffer.prototype.writeInt16LE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeInt16BE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeInt32LE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeInt32BE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeFloatLE=function(t,e,r){return writeFloat(this,t,e,!0,r)},Buffer.prototype.writeFloatBE=function(t,e,r){return writeFloat(this,t,e,!1,r)},Buffer.prototype.writeDoubleLE=function(t,e,r){return writeDouble(this,t,e,!0,r)},Buffer.prototype.writeDoubleBE=function(t,e,r){return writeDouble(this,t,e,!1,r)},Buffer.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i=n-r;if(i<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(var f=0;f<i;f++)t[f+e]=this[f+r];else t._set(this.subarray(r,r+i),e);return i},Buffer.prototype.fill=function(t,e,r){if(t||(t=0),e||(e=0),r||(r=this.length),r<e)throw new RangeError("end < start");if(r!==e&&0!==this.length){if(e<0||e>=this.length)throw new RangeError("start out of bounds");if(r<0||r>this.length)throw new RangeError("end out of bounds");var n;if("number"==typeof t)for(n=e;n<r;n++)this[n]=t;else{var i=utf8ToBytes(t.toString()),f=i.length;for(n=e;n<r;n++)this[n]=i[n%f]}return this}},Buffer.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(Buffer.TYPED_ARRAY_SUPPORT)return new Buffer(this).buffer;for(var t=new Uint8Array(this.length),e=0,r=t.length;e<r;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var BP=Buffer.prototype;Buffer._augment=function(t){return t.constructor=Buffer,t._isBuffer=!0,t._set=t.set,t.get=BP.get,t.set=BP.set,t.write=BP.write,t.toString=BP.toString,t.toLocaleString=BP.toString,t.toJSON=BP.toJSON,t.equals=BP.equals,t.compare=BP.compare,t.indexOf=BP.indexOf,t.copy=BP.copy,t.slice=BP.slice,t.readUIntLE=BP.readUIntLE,t.readUIntBE=BP.readUIntBE,t.readUInt8=BP.readUInt8,t.readUInt16LE=BP.readUInt16LE,t.readUInt16BE=BP.readUInt16BE,t.readUInt32LE=BP.readUInt32LE,t.readUInt32BE=BP.readUInt32BE,t.readIntLE=BP.readIntLE,t.readIntBE=BP.readIntBE,t.readInt8=BP.readInt8,t.readInt16LE=BP.readInt16LE,t.readInt16BE=BP.readInt16BE,t.readInt32LE=BP.readInt32LE,t.readInt32BE=BP.readInt32BE,t.readFloatLE=BP.readFloatLE,t.readFloatBE=BP.readFloatBE,t.readDoubleLE=BP.readDoubleLE,t.readDoubleBE=BP.readDoubleBE,t.writeUInt8=BP.writeUInt8,t.writeUIntLE=BP.writeUIntLE,t.writeUIntBE=BP.writeUIntBE,t.writeUInt16LE=BP.writeUInt16LE,t.writeUInt16BE=BP.writeUInt16BE,t.writeUInt32LE=BP.writeUInt32LE,t.writeUInt32BE=BP.writeUInt32BE,t.writeIntLE=BP.writeIntLE,t.writeIntBE=BP.writeIntBE,t.writeInt8=BP.writeInt8,t.writeInt16LE=BP.writeInt16LE,t.writeInt16BE=BP.writeInt16BE,t.writeInt32LE=BP.writeInt32LE,t.writeInt32BE=BP.writeInt32BE,t.writeFloatLE=BP.writeFloatLE,t.writeFloatBE=BP.writeFloatBE,t.writeDoubleLE=BP.writeDoubleLE,t.writeDoubleBE=BP.writeDoubleBE,t.fill=BP.fill,t.inspect=BP.inspect,t.toArrayBuffer=BP.toArrayBuffer,t};var INVALID_BASE64_RE=/[^+\/0-9A-z\-]/g;


},{"base64-js":45,"ieee754":46,"is-array":47}],45:[function(require,module,exports){
var lookup="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function r(t){var r=t.charCodeAt(0);return r===h||r===u?62:r===c||r===f?63:r<o?-1:r<o+10?r-o+26+26:r<i+26?r-i:r<A+26?r-A+26:void 0}function e(t){function e(t){i[f++]=t}var n,h,c,o,A,i;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=t.length;A="="===t.charAt(u-2)?2:"="===t.charAt(u-1)?1:0,i=new a(3*t.length/4-A),c=A>0?t.length-4:t.length;var f=0;for(n=0,h=0;n<c;n+=4,h+=3)o=r(t.charAt(n))<<18|r(t.charAt(n+1))<<12|r(t.charAt(n+2))<<6|r(t.charAt(n+3)),e((16711680&o)>>16),e((65280&o)>>8),e(255&o);return 2===A?(o=r(t.charAt(n))<<2|r(t.charAt(n+1))>>4,e(255&o)):1===A&&(o=r(t.charAt(n))<<10|r(t.charAt(n+1))<<4|r(t.charAt(n+2))>>2,e(o>>8&255),e(255&o)),i}function n(t){function r(t){return lookup.charAt(t)}function e(t){return r(t>>18&63)+r(t>>12&63)+r(t>>6&63)+r(63&t)}var n,a,h,c=t.length%3,o="";for(n=0,h=t.length-c;n<h;n+=3)a=(t[n]<<16)+(t[n+1]<<8)+t[n+2],o+=e(a);switch(c){case 1:a=t[t.length-1],o+=r(a>>2),o+=r(a<<4&63),o+="==";break;case 2:a=(t[t.length-2]<<8)+t[t.length-1],o+=r(a>>10),o+=r(a>>4&63),o+=r(a<<2&63),o+="="}return o}var a="undefined"!=typeof Uint8Array?Uint8Array:Array,h="+".charCodeAt(0),c="/".charCodeAt(0),o="0".charCodeAt(0),A="a".charCodeAt(0),i="A".charCodeAt(0),u="-".charCodeAt(0),f="_".charCodeAt(0);t.toByteArray=e,t.fromByteArray=n}("undefined"==typeof exports?this.base64js={}:exports);


},{}],46:[function(require,module,exports){
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:(s?-1:1)*(1/0);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),o+=p+N>=1?n/f:n*Math.pow(2,1-N),o*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};


},{}],47:[function(require,module,exports){
var isArray=Array.isArray,str=Object.prototype.toString;module.exports=isArray||function(r){return!!r&&"[object Array]"==str.call(r)};


},{}],48:[function(require,module,exports){
function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(e){return"function"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return"object"==typeof e&&null!==e}function isUndefined(e){return void 0===e}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(e){if(!isNumber(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){var t,n,i,s,r,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],isUndefined(n))return!1;if(isFunction(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,s=new Array(i-1),r=1;r<i;r++)s[r-1]=arguments[r];n.apply(this,s)}else if(isObject(n)){for(i=arguments.length,s=new Array(i-1),r=1;r<i;r++)s[r-1]=arguments[r];for(o=n.slice(),i=o.length,r=0;r<i;r++)o[r].apply(this,s)}return!0},EventEmitter.prototype.addListener=function(e,t){var n;if(!isFunction(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,isFunction(t.listener)?t.listener:t),this._events[e]?isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,isObject(this._events[e])&&!this._events[e].warned){var n;n=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!isFunction(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},EventEmitter.prototype.removeListener=function(e,t){var n,i,s,r;if(!isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,i=-1,n===t||isFunction(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(isObject(n)){for(r=s;r-- >0;)if(n[r]===t||n[r].listener&&n[r].listener===t){i=r;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],isFunction(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?isFunction(e._events[t])?1:e._events[t].length:0};


},{}],49:[function(require,module,exports){
"function"==typeof Object.create?module.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:module.exports=function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t};


},{}],50:[function(require,module,exports){
module.exports=Array.isArray||function(r){return"[object Array]"==Object.prototype.toString.call(r)};


},{}],51:[function(require,module,exports){
function drainQueue(){if(!draining){draining=!0;for(var e,o=queue.length;o;){e=queue,queue=[];for(var r=-1;++r<o;)e[r]();o=queue.length}draining=!1}}function noop(){}var process=module.exports={},queue=[],draining=!1;process.nextTick=function(e){queue.push(e),draining||setTimeout(drainQueue,0)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};


},{}],52:[function(require,module,exports){
module.exports=require("./lib/_stream_duplex.js");


},{"./lib/_stream_duplex.js":53}],53:[function(require,module,exports){
(function (process){
function Duplex(e){return this instanceof Duplex?(Readable.call(this,e),Writable.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",onend)):new Duplex(e)}function onend(){this.allowHalfOpen||this._writableState.ended||process.nextTick(this.end.bind(this))}function forEach(e,t){for(var i=0,r=e.length;i<r;i++)t(e[i],i)}module.exports=Duplex;var objectKeys=Object.keys||function(e){var t=[];for(var i in e)t.push(i);return t},util=require("core-util-is");util.inherits=require("inherits");var Readable=require("./_stream_readable"),Writable=require("./_stream_writable");util.inherits(Duplex,Readable),forEach(objectKeys(Writable.prototype),function(e){Duplex.prototype[e]||(Duplex.prototype[e]=Writable.prototype[e])});


}).call(this,require('_process'))
},{"./_stream_readable":55,"./_stream_writable":57,"_process":51,"core-util-is":58,"inherits":49}],54:[function(require,module,exports){
function PassThrough(r){return this instanceof PassThrough?void Transform.call(this,r):new PassThrough(r)}module.exports=PassThrough;var Transform=require("./_stream_transform"),util=require("core-util-is");util.inherits=require("inherits"),util.inherits(PassThrough,Transform),PassThrough.prototype._transform=function(r,s,i){i(null,r)};


},{"./_stream_transform":56,"core-util-is":58,"inherits":49}],55:[function(require,module,exports){
(function (process){
function ReadableState(e,t){var n=require("./_stream_duplex");e=e||{};var r=e.highWaterMark,i=e.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,t instanceof n&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(StringDecoder||(StringDecoder=require("string_decoder/").StringDecoder),this.decoder=new StringDecoder(e.encoding),this.encoding=e.encoding)}function Readable(e){require("./_stream_duplex");return this instanceof Readable?(this._readableState=new ReadableState(e,this),this.readable=!0,void Stream.call(this)):new Readable(e)}function readableAddChunk(e,t,n,r,i){var a=chunkInvalid(t,n);if(a)e.emit("error",a);else if(util.isNullOrUndefined(n))t.reading=!1,t.ended||onEofChunk(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!i){var d=new Error("stream.push() after EOF");e.emit("error",d)}else if(t.endEmitted&&i){var d=new Error("stream.unshift() after end event");e.emit("error",d)}else!t.decoder||i||r||(n=t.decoder.write(n)),i||(t.reading=!1),t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&emitReadable(e)),maybeReadMore(e,t);else i||(t.reading=!1);return needMoreData(t)}function needMoreData(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function roundUpToNextPowerOf2(e){if(e>=MAX_HWM)e=MAX_HWM;else{e--;for(var t=1;t<32;t<<=1)e|=e>>t;e++}return e}function howMuchToRead(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:isNaN(e)||util.isNull(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:e<=0?0:(e>t.highWaterMark&&(t.highWaterMark=roundUpToNextPowerOf2(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function chunkInvalid(e,t){var n=null;return util.isBuffer(t)||util.isString(t)||util.isNullOrUndefined(t)||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function onEofChunk(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,emitReadable(e)}function emitReadable(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(debug("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?process.nextTick(function(){emitReadable_(e)}):emitReadable_(e))}function emitReadable_(e){debug("emit readable"),e.emit("readable"),flow(e)}function maybeReadMore(e,t){t.readingMore||(t.readingMore=!0,process.nextTick(function(){maybeReadMore_(e,t)}))}function maybeReadMore_(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(debug("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function pipeOnDrain(e){return function(){var t=e._readableState;debug("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&EE.listenerCount(e,"data")&&(t.flowing=!0,flow(e))}}function resume(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process.nextTick(function(){resume_(e,t)}))}function resume_(e,t){t.resumeScheduled=!1,e.emit("resume"),flow(e),t.flowing&&!t.reading&&e.read(0)}function flow(e){var t=e._readableState;if(debug("flow",t.flowing),t.flowing)do var n=e.read();while(null!==n&&t.flowing)}function fromList(e,t){var n,r=t.buffer,i=t.length,a=!!t.decoder,d=!!t.objectMode;if(0===r.length)return null;if(0===i)n=null;else if(d)n=r.shift();else if(!e||e>=i)n=a?r.join(""):Buffer.concat(r,i),r.length=0;else if(e<r[0].length){var o=r[0];n=o.slice(0,e),r[0]=o.slice(e)}else if(e===r[0].length)n=r.shift();else{n=a?"":new Buffer(e);for(var l=0,u=0,s=r.length;u<s&&l<e;u++){var o=r[0],h=Math.min(e-l,o.length);a?n+=o.slice(0,h):o.copy(n,l,0,h),h<o.length?r[0]=o.slice(h):r.shift(),l+=h}}return n}function endReadable(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");t.endEmitted||(t.ended=!0,process.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function forEach(e,t){for(var n=0,r=e.length;n<r;n++)t(e[n],n)}function indexOf(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}module.exports=Readable;var isArray=require("isarray"),Buffer=require("buffer").Buffer;Readable.ReadableState=ReadableState;var EE=require("events").EventEmitter;EE.listenerCount||(EE.listenerCount=function(e,t){return e.listeners(t).length});var Stream=require("stream"),util=require("core-util-is");util.inherits=require("inherits");var StringDecoder,debug=require("util");debug=debug&&debug.debuglog?debug.debuglog("stream"):function(){},util.inherits(Readable,Stream),Readable.prototype.push=function(e,t){var n=this._readableState;return util.isString(e)&&!n.objectMode&&(t=t||n.defaultEncoding,t!==n.encoding&&(e=new Buffer(e,t),t="")),readableAddChunk(this,n,e,t,!1)},Readable.prototype.unshift=function(e){var t=this._readableState;return readableAddChunk(this,t,e,"",!0)},Readable.prototype.setEncoding=function(e){return StringDecoder||(StringDecoder=require("string_decoder/").StringDecoder),this._readableState.decoder=new StringDecoder(e),this._readableState.encoding=e,this};var MAX_HWM=8388608;Readable.prototype.read=function(e){debug("read",e);var t=this._readableState,n=e;if((!util.isNumber(e)||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return debug("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?endReadable(this):emitReadable(this),null;if(e=howMuchToRead(e,t),0===e&&t.ended)return 0===t.length&&endReadable(this),null;var r=t.needReadable;debug("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,debug("length less than watermark",r)),(t.ended||t.reading)&&(r=!1,debug("reading or ended",r)),r&&(debug("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),r&&!t.reading&&(e=howMuchToRead(n,t));var i;return i=e>0?fromList(e,t):null,util.isNull(i)&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),n!==e&&t.ended&&0===t.length&&endReadable(this),util.isNull(i)||this.emit("data",i),i},Readable.prototype._read=function(e){this.emit("error",new Error("not implemented"))},Readable.prototype.pipe=function(e,t){function n(e){debug("onunpipe"),e===s&&i()}function r(){debug("onend"),e.end()}function i(){debug("cleanup"),e.removeListener("close",o),e.removeListener("finish",l),e.removeListener("drain",c),e.removeListener("error",d),e.removeListener("unpipe",n),s.removeListener("end",r),s.removeListener("end",i),s.removeListener("data",a),!h.awaitDrain||e._writableState&&!e._writableState.needDrain||c()}function a(t){debug("ondata");var n=e.write(t);!1===n&&(debug("false write response, pause",s._readableState.awaitDrain),s._readableState.awaitDrain++,s.pause())}function d(t){debug("onerror",t),u(),e.removeListener("error",d),0===EE.listenerCount(e,"error")&&e.emit("error",t)}function o(){e.removeListener("finish",l),u()}function l(){debug("onfinish"),e.removeListener("close",o),u()}function u(){debug("unpipe"),s.unpipe(e)}var s=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=e;break;case 1:h.pipes=[h.pipes,e];break;default:h.pipes.push(e)}h.pipesCount+=1,debug("pipe count=%d opts=%j",h.pipesCount,t);var f=(!t||t.end!==!1)&&e!==process.stdout&&e!==process.stderr,b=f?r:i;h.endEmitted?process.nextTick(b):s.once("end",b),e.on("unpipe",n);var c=pipeOnDrain(s);return e.on("drain",c),s.on("data",a),e._events&&e._events.error?isArray(e._events.error)?e._events.error.unshift(d):e._events.error=[d,e._events.error]:e.on("error",d),e.once("close",o),e.once("finish",l),e.emit("pipe",s),h.flowing||(debug("pipe resume"),s.resume()),e},Readable.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<r;i++)n[i].emit("unpipe",this);return this}var i=indexOf(t.pipes,e);return i===-1?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},Readable.prototype.on=function(e,t){var n=Stream.prototype.on.call(this,e,t);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&this.readable){var r=this._readableState;if(!r.readableListening)if(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading)r.length&&emitReadable(this,r);else{var i=this;process.nextTick(function(){debug("readable nexttick read 0"),i.read(0)})}}return n},Readable.prototype.addListener=Readable.prototype.on,Readable.prototype.resume=function(){var e=this._readableState;return e.flowing||(debug("resume"),e.flowing=!0,e.reading||(debug("resume read 0"),this.read(0)),resume(this,e)),this},Readable.prototype.pause=function(){return debug("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(debug("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Readable.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(debug("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){if(debug("wrapped data"),t.decoder&&(i=t.decoder.write(i)),i&&(t.objectMode||i.length)){var a=r.push(i);a||(n=!0,e.pause())}});for(var i in e)util.isFunction(e[i])&&util.isUndefined(this[i])&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var a=["error","close","destroy","pause","resume"];return forEach(a,function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(t){debug("wrapped _read",t),n&&(n=!1,e.resume())},r},Readable._fromList=fromList;


}).call(this,require('_process'))
},{"./_stream_duplex":53,"_process":51,"buffer":44,"core-util-is":58,"events":48,"inherits":49,"isarray":50,"stream":63,"string_decoder/":64,"util":43}],56:[function(require,module,exports){
function TransformState(r,t){this.afterTransform=function(r,n){return afterTransform(t,r,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function afterTransform(r,t,n){var e=r._transformState;e.transforming=!1;var i=e.writecb;if(!i)return r.emit("error",new Error("no writecb in Transform class"));e.writechunk=null,e.writecb=null,util.isNullOrUndefined(n)||r.push(n),i&&i(t);var a=r._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&r._read(a.highWaterMark)}function Transform(r){if(!(this instanceof Transform))return new Transform(r);Duplex.call(this,r),this._transformState=new TransformState(r,this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){util.isFunction(this._flush)?this._flush(function(r){done(t,r)}):done(t)})}function done(r,t){if(t)return r.emit("error",t);var n=r._writableState,e=r._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(e.transforming)throw new Error("calling transform done when still transforming");return r.push(null)}module.exports=Transform;var Duplex=require("./_stream_duplex"),util=require("core-util-is");util.inherits=require("inherits"),util.inherits(Transform,Duplex),Transform.prototype.push=function(r,t){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,r,t)},Transform.prototype._transform=function(r,t,n){throw new Error("not implemented")},Transform.prototype._write=function(r,t,n){var e=this._transformState;if(e.writecb=n,e.writechunk=r,e.writeencoding=t,!e.transforming){var i=this._readableState;(e.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},Transform.prototype._read=function(r){var t=this._transformState;util.isNull(t.writechunk)||!t.writecb||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))};


},{"./_stream_duplex":53,"core-util-is":58,"inherits":49}],57:[function(require,module,exports){
(function (process){
function WriteReq(e,i,t){this.chunk=e,this.encoding=i,this.callback=t}function WritableState(e,i){var t=require("./_stream_duplex");e=e||{};var r=e.highWaterMark,n=e.objectMode?16:16384;this.highWaterMark=r||0===r?r:n,this.objectMode=!!e.objectMode,i instanceof t&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=e.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){onwrite(i,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function Writable(e){var i=require("./_stream_duplex");return this instanceof Writable||this instanceof i?(this._writableState=new WritableState(e,this),this.writable=!0,void Stream.call(this)):new Writable(e)}function writeAfterEnd(e,i,t){var r=new Error("write after end");e.emit("error",r),process.nextTick(function(){t(r)})}function validChunk(e,i,t,r){var n=!0;if(!(util.isBuffer(t)||util.isString(t)||util.isNullOrUndefined(t)||i.objectMode)){var o=new TypeError("Invalid non-string/buffer chunk");e.emit("error",o),process.nextTick(function(){r(o)}),n=!1}return n}function decodeChunk(e,i,t){return!e.objectMode&&e.decodeStrings!==!1&&util.isString(i)&&(i=new Buffer(i,t)),i}function writeOrBuffer(e,i,t,r,n){t=decodeChunk(i,t,r),util.isBuffer(t)&&(r="buffer");var o=i.objectMode?1:t.length;i.length+=o;var f=i.length<i.highWaterMark;return f||(i.needDrain=!0),i.writing||i.corked?i.buffer.push(new WriteReq(t,r,n)):doWrite(e,i,!1,o,t,r,n),f}function doWrite(e,i,t,r,n,o,f){i.writelen=r,i.writecb=f,i.writing=!0,i.sync=!0,t?e._writev(n,i.onwrite):e._write(n,o,i.onwrite),i.sync=!1}function onwriteError(e,i,t,r,n){t?process.nextTick(function(){i.pendingcb--,n(r)}):(i.pendingcb--,n(r)),e._writableState.errorEmitted=!0,e.emit("error",r)}function onwriteStateUpdate(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function onwrite(e,i){var t=e._writableState,r=t.sync,n=t.writecb;if(onwriteStateUpdate(t),i)onwriteError(e,t,r,i,n);else{var o=needFinish(e,t);o||t.corked||t.bufferProcessing||!t.buffer.length||clearBuffer(e,t),r?process.nextTick(function(){afterWrite(e,t,o,n)}):afterWrite(e,t,o,n)}}function afterWrite(e,i,t,r){t||onwriteDrain(e,i),i.pendingcb--,r(),finishMaybe(e,i)}function onwriteDrain(e,i){0===i.length&&i.needDrain&&(i.needDrain=!1,e.emit("drain"))}function clearBuffer(e,i){if(i.bufferProcessing=!0,e._writev&&i.buffer.length>1){for(var t=[],r=0;r<i.buffer.length;r++)t.push(i.buffer[r].callback);i.pendingcb++,doWrite(e,i,!0,i.length,i.buffer,"",function(e){for(var r=0;r<t.length;r++)i.pendingcb--,t[r](e)}),i.buffer=[]}else{for(var r=0;r<i.buffer.length;r++){var n=i.buffer[r],o=n.chunk,f=n.encoding,u=n.callback,s=i.objectMode?1:o.length;if(doWrite(e,i,!1,s,o,f,u),i.writing){r++;break}}r<i.buffer.length?i.buffer=i.buffer.slice(r):i.buffer.length=0}i.bufferProcessing=!1}function needFinish(e,i){return i.ending&&0===i.length&&!i.finished&&!i.writing}function prefinish(e,i){i.prefinished||(i.prefinished=!0,e.emit("prefinish"))}function finishMaybe(e,i){var t=needFinish(e,i);return t&&(0===i.pendingcb?(prefinish(e,i),i.finished=!0,e.emit("finish")):prefinish(e,i)),t}function endWritable(e,i,t){i.ending=!0,finishMaybe(e,i),t&&(i.finished?process.nextTick(t):e.once("finish",t)),i.ended=!0}module.exports=Writable;var Buffer=require("buffer").Buffer;Writable.WritableState=WritableState;var util=require("core-util-is");util.inherits=require("inherits");var Stream=require("stream");util.inherits(Writable,Stream),Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},Writable.prototype.write=function(e,i,t){var r=this._writableState,n=!1;return util.isFunction(i)&&(t=i,i=null),util.isBuffer(e)?i="buffer":i||(i=r.defaultEncoding),util.isFunction(t)||(t=function(){}),r.ended?writeAfterEnd(this,r,t):validChunk(this,r,e,t)&&(r.pendingcb++,n=writeOrBuffer(this,r,e,i,t)),n},Writable.prototype.cork=function(){var e=this._writableState;e.corked++},Writable.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.buffer.length||clearBuffer(this,e))},Writable.prototype._write=function(e,i,t){t(new Error("not implemented"))},Writable.prototype._writev=null,Writable.prototype.end=function(e,i,t){var r=this._writableState;util.isFunction(e)?(t=e,e=null,i=null):util.isFunction(i)&&(t=i,i=null),util.isNullOrUndefined(e)||this.write(e,i),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||endWritable(this,r,t)};


}).call(this,require('_process'))
},{"./_stream_duplex":53,"_process":51,"buffer":44,"core-util-is":58,"inherits":49,"stream":63}],58:[function(require,module,exports){
(function (Buffer){
function isArray(e){return Array.isArray(e)}function isBoolean(e){return"boolean"==typeof e}function isNull(e){return null===e}function isNullOrUndefined(e){return null==e}function isNumber(e){return"number"==typeof e}function isString(e){return"string"==typeof e}function isSymbol(e){return"symbol"==typeof e}function isUndefined(e){return void 0===e}function isRegExp(e){return isObject(e)&&"[object RegExp]"===objectToString(e)}function isObject(e){return"object"==typeof e&&null!==e}function isDate(e){return isObject(e)&&"[object Date]"===objectToString(e)}function isError(e){return isObject(e)&&("[object Error]"===objectToString(e)||e instanceof Error)}function isFunction(e){return"function"==typeof e}function isPrimitive(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function isBuffer(e){return Buffer.isBuffer(e)}function objectToString(e){return Object.prototype.toString.call(e)}exports.isArray=isArray,exports.isBoolean=isBoolean,exports.isNull=isNull,exports.isNullOrUndefined=isNullOrUndefined,exports.isNumber=isNumber,exports.isString=isString,exports.isSymbol=isSymbol,exports.isUndefined=isUndefined,exports.isRegExp=isRegExp,exports.isObject=isObject,exports.isDate=isDate,exports.isError=isError,exports.isFunction=isFunction,exports.isPrimitive=isPrimitive,exports.isBuffer=isBuffer;


}).call(this,require("buffer").Buffer)
},{"buffer":44}],59:[function(require,module,exports){
module.exports=require("./lib/_stream_passthrough.js");


},{"./lib/_stream_passthrough.js":54}],60:[function(require,module,exports){
exports=module.exports=require("./lib/_stream_readable.js"),exports.Stream=require("stream"),exports.Readable=exports,exports.Writable=require("./lib/_stream_writable.js"),exports.Duplex=require("./lib/_stream_duplex.js"),exports.Transform=require("./lib/_stream_transform.js"),exports.PassThrough=require("./lib/_stream_passthrough.js");


},{"./lib/_stream_duplex.js":53,"./lib/_stream_passthrough.js":54,"./lib/_stream_readable.js":55,"./lib/_stream_transform.js":56,"./lib/_stream_writable.js":57,"stream":63}],61:[function(require,module,exports){
module.exports=require("./lib/_stream_transform.js");


},{"./lib/_stream_transform.js":56}],62:[function(require,module,exports){
module.exports=require("./lib/_stream_writable.js");


},{"./lib/_stream_writable.js":57}],63:[function(require,module,exports){
function Stream(){EE.call(this)}module.exports=Stream;var EE=require("events").EventEmitter,inherits=require("inherits");inherits(Stream,EE),Stream.Readable=require("readable-stream/readable.js"),Stream.Writable=require("readable-stream/writable.js"),Stream.Duplex=require("readable-stream/duplex.js"),Stream.Transform=require("readable-stream/transform.js"),Stream.PassThrough=require("readable-stream/passthrough.js"),Stream.Stream=Stream,Stream.prototype.pipe=function(e,r){function t(r){e.writable&&!1===e.write(r)&&m.pause&&m.pause()}function n(){m.readable&&m.resume&&m.resume()}function a(){u||(u=!0,e.end())}function o(){u||(u=!0,"function"==typeof e.destroy&&e.destroy())}function i(e){if(s(),0===EE.listenerCount(this,"error"))throw e}function s(){m.removeListener("data",t),e.removeListener("drain",n),m.removeListener("end",a),m.removeListener("close",o),m.removeListener("error",i),e.removeListener("error",i),m.removeListener("end",s),m.removeListener("close",s),e.removeListener("close",s)}var m=this;m.on("data",t),e.on("drain",n),e._isStdio||r&&r.end===!1||(m.on("end",a),m.on("close",o));var u=!1;return m.on("error",i),e.on("error",i),m.on("end",s),m.on("close",s),e.on("close",s),e.emit("pipe",m),e};


},{"events":48,"inherits":49,"readable-stream/duplex.js":52,"readable-stream/passthrough.js":59,"readable-stream/readable.js":60,"readable-stream/transform.js":61,"readable-stream/writable.js":62}],64:[function(require,module,exports){
function assertEncoding(e){if(e&&!isBufferEncoding(e))throw new Error("Unknown encoding: "+e)}function passThroughWrite(e){return e.toString(this.encoding)}function utf16DetectIncompleteChar(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function base64DetectIncompleteChar(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var Buffer=require("buffer").Buffer,isBufferEncoding=Buffer.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},StringDecoder=exports.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),assertEncoding(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=utf16DetectIncompleteChar;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=base64DetectIncompleteChar;break;default:return void(this.write=passThroughWrite)}this.charBuffer=new Buffer(6),this.charReceived=0,this.charLength=0};StringDecoder.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";e=e.slice(r,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var h=t.charCodeAt(t.length-1);if(!(h>=55296&&h<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,h=t.charCodeAt(i);if(h>=55296&&h<=56319){var c=this.surrogateSize;return this.charLength+=c,this.charReceived+=c,this.charBuffer.copy(this.charBuffer,c,0,c),e.copy(this.charBuffer,0,0,c),t.substring(0,i)}return t},StringDecoder.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(t<=2&&r>>4==14){this.charLength=3;break}if(t<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=t},StringDecoder.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,h=this.charBuffer,i=this.encoding;t+=h.slice(0,r).toString(i)}return t};


},{"buffer":44}]},{},[40]);
