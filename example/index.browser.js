(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
module.exports=require("fastn")({list:require("fastn/listComponent"),text:require("fastn/textComponent"),_generic:require("fastn/genericComponent")},!0);

},{"fastn":18,"fastn/genericComponent":17,"fastn/listComponent":20,"fastn/textComponent":24}],2:[function(require,module,exports){
var fastn=require("./fastn");module.exports=function(){return fastn("div",{class:"github-fork-ribbon-wrapper bottom"},fastn("div",{class:"github-fork-ribbon"},fastn("a",{href:"https://github.com/KoryNunn/fastn/tree/gh-pages/example"},"Fork me")))};

},{"./fastn":1}],3:[function(require,module,exports){
var fastn=require("./fastn"),usersModel=require("./users").usersModel;module.exports=function(e){return fastn("header",{class:"mainHeader"},fastn("img",{src:"../images/fastn-sml.png"}),fastn("h1","fastn",fastn("span",{class:"faint"},".js")),fastn("span",fastn.binding("users|*","deletedUsers|*",require("./search").result,function(e,s,r){var n=e.filter(function(e){return!~s.indexOf(e)}).length,t="";return r&&(t+="Showing "+r.filter(function(e){return!~s.indexOf(e)}).length+" of "),t+=n})," users").attach(usersModel),require("./searchBar")())};

},{"./fastn":1,"./search":37,"./searchBar":38,"./users":41}],4:[function(require,module,exports){
var fastn=require("./fastn"),userService=require("./users"),app=fastn("div",require("./header")(),require("./userList")(),require("./forkBanner")());window.onload=function(){app.render(),document.body.appendChild(app.element),document.addEventListener("click",function(){userService.selectedUser(null)},!0)};
},{"./fastn":1,"./forkBanner":2,"./header":3,"./userList":40,"./users":41}],5:[function(require,module,exports){
var fastn=require("./fastn"),usersService=require("./users");module.exports=function(){function e(){n.element.classList.add("closed"),setTimeout(function(){document.body.removeChild(n.element),n.destroy()},300)}var n=fastn("div",{class:"newUser dialog"},fastn("form",{class:"modal"},fastn("h3","Add a user"),fastn("field",fastn("label","First Name"),fastn("input",{value:fastn.binding("name.first"),onchange:"value:value"})),fastn("field",fastn("label","Surname"),fastn("input",{value:fastn.binding("name.last"),onchange:"value:value"})),fastn("field",fastn("label","Email"),fastn("input",{value:fastn.binding("email"),onchange:"value:value"})),fastn("field",fastn("label","Mobile"),fastn("input",{value:fastn.binding("cell"),onchange:"value:value"})),fastn("button","Add")).on("submit",function(n,a){n.preventDefault(),usersService.addUser(a.get(".")),e()})).on("click",function(n){n.target===this.element&&e()}),a=Math.floor(100*Math.random());n.attach({gender:null,name:{title:null,first:null,last:null},email:null,dob:null,cell:null,picture:{large:"http://api.randomuser.me/portraits/women/"+a+".jpg",medium:"http://api.randomuser.me/portraits/med/women/"+a+".jpg",thumbnail:"http://api.randomuser.me/portraits/thumb/women/"+a+".jpg"}}),n.render(),document.body.appendChild(n.element)};

},{"./fastn":1,"./users":41}],6:[function(require,module,exports){
module.exports=function(n){var t=[];return function(i){function r(n,t){return"string"==typeof t&&t.match(/\s/)&&(t=t.split(" ")),Array.isArray(t)?n.concat(t.reduce(r,[])):(null!=t&&""!==t&&"boolean"!=typeof t&&n.push(String(t).trim()),n)}if(!arguments.length)return t.join(" ");var a=r([],i),e=n.className?n.className.split(" "):[];t.map(function(n){if(n){var t=e.indexOf(n);~t&&e.splice(t,1)}}),t.join()!==a.join()&&(e=e.concat(a),t=a,n.className=e.join(" "))}};

},{}],7:[function(require,module,exports){
var clone=function(){"use strict";function e(t,r,n,o){function i(t,n){if(null===t)return null;if(0==n)return t;var p,a;if("object"!=typeof t)return t;if(e.__isArray(t))p=[];else if(e.__isRegExp(t))p=new RegExp(t.source,u(t)),t.lastIndex&&(p.lastIndex=t.lastIndex);else if(e.__isDate(t))p=new Date(t.getTime());else{if(l&&Buffer.isBuffer(t))return p=new Buffer(t.length),t.copy(p),p;void 0===o?(a=Object.getPrototypeOf(t),p=Object.create(a)):(p=Object.create(o),a=o)}if(r){var s=f.indexOf(t);if(-1!=s)return c[s];f.push(t),c.push(p)}for(var y in t){var b;a&&(b=Object.getOwnPropertyDescriptor(a,y)),b&&null==b.set||(p[y]=i(t[y],n-1))}return p}"object"==typeof r&&(n=r.depth,o=r.prototype,r.filter,r=r.circular);var f=[],c=[],l="undefined"!=typeof Buffer;return void 0===r&&(r=!0),void 0===n&&(n=1/0),i(t,n)}function t(e){return Object.prototype.toString.call(e)}function r(e){return"object"==typeof e&&"[object Date]"===t(e)}function n(e){return"object"==typeof e&&"[object Array]"===t(e)}function o(e){return"object"==typeof e&&"[object RegExp]"===t(e)}function u(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return e.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},e.__objToStr=t,e.__isDate=r,e.__isArray=n,e.__isRegExp=o,e.__getRegExpFlags=u,e}();"object"==typeof module&&module.exports&&(module.exports=clone);

},{}],8:[function(require,module,exports){
var Ajax=require("simple-ajax");module.exports=function(e,t){if("string"==typeof e&&(e={url:e}),"object"!=typeof e)throw"settings must be a string or object";if("function"!=typeof t)throw"cpjax must be passed a callback as the second parameter";var r=new Ajax(e);return r.on("success",function(e,r){t(null,r,e)}),r.on("error",function(e){t(new Error(e.target.responseText),null,e)}),r.send(),r};

},{"simple-ajax":35}],9:[function(require,module,exports){
function compare(r,e,n){var t=typeof r;if(t!==typeof e)return!1;if(null==r||null==e||"object"!==t&&"function"!==t)return!("number"!==t||!isNaN(r)||!isNaN(e))||r===e;if(Array.isArray(r)!==Array.isArray(e))return!1;var i=Object.keys(r),o=Object.keys(e);if(i.length!==o.length)return!1;var u=!0;return n||(n=new Set),i.forEach(function(t){if(!(t in e))return void(u=!1);if(r[t]&&r[t]instanceof Object){if(n.has(r[t]))return;n.add(r[t])}return compare(r[t],e[t],n)?void 0:void(u=!1)}),u}module.exports=function(r,e){return compare(r,e)};

},{}],10:[function(require,module,exports){
module.exports=function(l,n,u){function t(){var c=Date.now()-r;c<n&&c>=0?e=setTimeout(t,n-c):(e=null,u||(i=l.apply(a,o),a=o=null))}var e,o,a,r,i;null==n&&(n=100);var c=function(){a=this,o=arguments,r=Date.now();var c=u&&!e;return e||(e=setTimeout(t,n)),c&&(i=l.apply(a,o),a=o=null),i};return c.clear=function(){e&&(clearTimeout(e),e=null)},c.flush=function(){e&&(i=l.apply(a,o),a=o=null,clearTimeout(e),e=null)},c};

},{}],11:[function(require,module,exports){
(function (global){
function toArray(t){return Array.prototype.slice.call(t)}function matchDeep(t){return(t+"").match(deepRegex)}function isWildcardPath(t){return~(t+"").indexOf("*")}function getTargetKey(t){return(t+"").split("|").shift()}function leftAndRest(t){var e=t+"";if(".|"===e.slice(0,2))return[".",e.slice(2)];var n=matchDeep(e);return n?[e.slice(0,n.index),e.slice(n.index+1)]:e}function isWildcardKey(t){return"*"===t.charAt(0)}function isFeralcardKey(t){return"**"===t}function addHandler(t,e,n,r){var i=trackedObjects.get(t);null==i&&(i={},trackedObjects.set(t,i));var a=i[e];if(a||(a=new Map,i[e]=a),a.has(r))return void a.get(r).add(n);var o=new Set;o.add(n),a.set(r,o)}function removeHandler(t,e,n,r){var i=trackedObjects.get(t);if(null!=i){var a=i[e];if(a){var o=a.get(r);o&&o.delete(n)}}}function trackObjects(t,e,n,r,i,a){if(r&&"object"==typeof r){var o=r[i];o&&"object"==typeof o&&e.has(o)||trackObject(t,e,n,r,i,a)}}function trackKeys(t,e,n,r,i,a){for(var o=Object.keys(r),s=0;s<o.length;s++)isFeralcardKey(i)?trackObjects(t,e,n,r,o[s],"**"+(a?".":"")+(a||"")):trackObjects(t,e,n,r,o[s],a)}function trackObject(t,e,n,r,i,a){var o="**"===i?"*":i,s=r[i],c=s&&"object"==typeof s,f=function(l,d,u){if("*"!==o&&"object"==typeof r[o]&&r[o]!==s)return c&&e.delete(s),removeHandler(r,o,f,t),void trackObjects(t,e,n,r,i,a);"*"===o&&trackKeys(t,e,n,r,i,a),e.has(r)&&("**"===i&&a||n(l,d,u))};if(addHandler(r,o,f,t),c&&(e.add(s),a)){var l,d,u=leftAndRest(a);Array.isArray(u)?(l=u[0],d=u[1],"."===l&&(l="*")):l=u,c&&isWildcardKey(l)&&trackKeys(t,e,n,s,l,d),trackObjects(t,e,n,s,l,d)}}function createHandler(t,e,n){var r=t._model;return function(t,i){var a=e[n];a&&a.entis.forEach(function(o){if(o._emittedEvents[n]!==i){if(o._model!==r)return a.entis.delete(o),void(0===a.entis.size&&(delete e[n],Object.keys(e).length||trackedEvents.delete(r)));o._emittedEvents[n]=i;var s=getTargetKey(n),c=isWildcardPath(s)?void 0:o.get(s);o.emit(n,c,t)}})}}function trackPath(t,e){var n=t._model,r=trackedEvents.get(n);r||(r={},trackedEvents.set(n,r));var i=r[e];if(i){if(i.entis.has(t))return}else i={entis:new Set,trackedObjects:new WeakSet},r[e]=i;i.entis.add(t);var a=createHandler(t,r,e);trackObjects(e,i.trackedObjects,a,{model:n},"model",e)}function trackPaths(t){if(t._events&&t._model){for(var e in t._events)trackPath(t,e);modifiedEnties.delete(t)}}function emitEvent(t,e,n,r){function i(t){t.forEach(function(t){t(o,r)})}modifiedEnties.forEach(trackPaths);var a=trackedObjects.get(t);if(a){var o={value:n,key:e,object:t};a[e]&&a[e].forEach(i),a["*"]&&a["*"].forEach(i)}}function emit(t){var e={};t.forEach(function(t){emitEvent(t[0],t[1],t[2],e)})}function Enti(t){var e=!1===t;(!t||"object"!=typeof t&&"function"!=typeof t)&&(t={}),this._emittedEvents={},e?this._model={}:this.attach(t),this.on("newListener",function(){modifiedEnties.add(this)})}var EventEmitter=require("events").EventEmitter,isInstance=require("is-instance"),deepRegex=/[|.]/i,eventSystemVersion=1,globalKey="_entiEventState"+eventSystemVersion;globalState=global[globalKey]=global[globalKey]||{instances:[]};var modifiedEnties=globalState.modifiedEnties=globalState.modifiedEnties||new Set,trackedObjects=globalState.trackedObjects=globalState.trackedObjects||new WeakMap,trackedEvents=new WeakMap;Enti.emit=function(t,e,n){"object"!=typeof t&&"function"!=typeof t||emit([[t,e,n]])},Enti.get=function(t,e){if(t&&"object"==typeof t){if("."===(e=getTargetKey(e)))return t;var n=leftAndRest(e);return Array.isArray(n)?Enti.get(t[n[0]],n[1]):t[e]}},Enti.set=function(t,e,n){if(t&&"object"==typeof t){e=getTargetKey(e);var r=leftAndRest(e);if(Array.isArray(r))return Enti.set(t[r[0]],r[1],n);var i=t[e];if("object"==typeof n||n!==i){var a=!(e in t);t[e]=n;var o=[[t,e,n]];a&&Array.isArray(t)&&o.push([t,"length",t.length]),emit(o)}}},Enti.push=function(t,e,n){if(t&&"object"==typeof t){var r;if(arguments.length<3)n=e,e=".",r=t;else{var i=leftAndRest(e);if(Array.isArray(i))return Enti.push(t[i[0]],i[1],n);r=t[e]}if(!Array.isArray(r))throw"The target is not an array.";r.push(n);emit([[r,r.length-1,n],[r,"length",r.length]])}},Enti.insert=function(t,e,n,r){if(t&&"object"==typeof t){var i;if(arguments.length<4)r=n,n=e,e=".",i=t;else{var a=leftAndRest(e);if(Array.isArray(a))return Enti.insert(t[a[0]],a[1],n,r);i=t[e]}if(!Array.isArray(i))throw"The target is not an array.";i.splice(r,0,n);emit([[i,r,n],[i,"length",i.length]])}},Enti.remove=function(t,e,n){if(t&&"object"==typeof t){var r=leftAndRest(e);if(Array.isArray(r))return Enti.remove(t[r[0]],r[1],n);if(null!=n)return void Enti.remove(t[e],n);if("."===e)throw". (self) is not a valid key to remove";var i=[];Array.isArray(t)?(t.splice(e,1),i.push([t,"length",t.length])):(delete t[e],i.push([t,e])),emit(i)}},Enti.move=function(t,e,n){if(t&&"object"==typeof t){var r=leftAndRest(e);if(Array.isArray(r))return Enti.move(t[r[0]],r[1],n);if(e!==n){if(!Array.isArray(t))throw"The model is not an array.";var i=t[e];t.splice(e,1),t.splice(n-(n>e?0:1),0,i),emit([[t,n,i]])}}},Enti.update=function(t,e,n){function r(t,e){for(var n in e){var i=t[n];!(i instanceof Object)||c.has(i)||i instanceof Date?(t[n]=e[n],s.push([t,n,e[n]])):(c.add(i),r(i,e[n]))}Array.isArray(t)&&s.push([t,"length",t.length])}if(t&&"object"==typeof t){var i,a=Array.isArray(n);if(arguments.length<3)n=e,e=".",i=t;else{var o=leftAndRest(e);if(Array.isArray(o))return Enti.update(t[o[0]],o[1],n);i=t[e],null==i&&(t[e]=a?[]:{})}if("object"!=typeof n)throw"The value is not an object.";if("object"!=typeof i)throw"The target is not an object.";var s=[],c=new WeakSet;r(i,n),emit(s)}},Enti.prototype=Object.create(EventEmitter.prototype),Enti.prototype._maxListeners=100,Enti.prototype.constructor=Enti,Enti.prototype.attach=function(t){if(this._model!==t&&this.detach(),t&&!isInstance(t))throw"Entis may only be attached to an object, or null/undefined";modifiedEnties.add(this),this._attached=!0,this._model=t,this.emit("attach",t)},Enti.prototype.detach=function(){modifiedEnties.delete(this),this._emittedEvents={},this._model={},this._attached=!1,this.emit("detach")},Enti.prototype.destroy=function(){this.detach(),this._events=null,this.emit("destroy")},Enti.prototype.get=function(t){return Enti.get(this._model,t)},Enti.prototype.set=function(t,e){return Enti.set(this._model,t,e)},Enti.prototype.push=function(t,e){return Enti.push.apply(null,[this._model].concat(toArray(arguments)))},Enti.prototype.insert=function(t,e,n){return Enti.insert.apply(null,[this._model].concat(toArray(arguments)))},Enti.prototype.remove=function(t,e){return Enti.remove.apply(null,[this._model].concat(toArray(arguments)))},Enti.prototype.move=function(t,e){return Enti.move.apply(null,[this._model].concat(toArray(arguments)))},Enti.prototype.update=function(t,e){return Enti.update.apply(null,[this._model].concat(toArray(arguments)))},Enti.prototype.isAttached=function(){return this._attached},Enti.prototype.attachedCount=function(){return modifiedEnties.size},Enti.isEnti=function(t){return t&&!!~globalState.instances.indexOf(t.constructor)},Enti.store=function(t,e,n){if(arguments.length<2)return Enti.get(t,e);Enti.set(t,e,n)},globalState.instances.push(Enti),module.exports=Enti;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"events":42,"is-instance":27}],12:[function(require,module,exports){
function flatten(t){return Array.isArray(t)?t.reduce(function(t,n){return null==n?t:t.concat(flatten(n))},[]):t}function attachProperties(t,n){for(var e in this._properties)this._properties[e].attach(t,n)}function onRender(){this.attach(void 0,0);for(var t in this._properties)this._properties[t].update()}function detachProperties(t){for(var n in this._properties)this._properties[n].detach(t)}function destroyProperties(){for(var t in this._properties)this._properties[t].destroy()}function clone(){return this.fastn(this.component._type,this.component._settings,this.component._children.filter(function(t){return!t._templated}).map(function(t){return t.clone()}))}function getSetBinding(t){return arguments.length?(is.binding(t)||(t=this.fastn.binding(t)),this.binding&&this.binding!==t&&(this.binding.removeListener("change",this.emitAttach),t.attach(this.binding._model,this.binding._firm)),this.binding=t,this.binding.on("change",this.emitAttach),this.binding.on("detach",this.emitDetach),this.emitAttach(),this.component):this.binding}function emitAttach(){var t=this.binding();t!==this.lastBound&&(this.lastBound=t,this.scope.attach(this.lastBound),this.component.emit("attach",this.scope,1))}function emitDetach(){this.component.emit("detach",1)}function getScope(){return this.scope}function destroy(){if(!this.destroyed)return this.destroyed=!0,this.component.removeAllListeners("render").removeAllListeners("attach"),this.component.emit("destroy"),this.component.element=null,this.scope.destroy(),this.binding.destroy(),this.component}function attachComponent(t,n){return this.binding.attach(t,n),this.component}function detachComponent(t){return this.binding.detach(t),this.component}function isDestroyed(){return this.destroyed}function setProperty(t,n){return n||(n=this.component[t]||this.fastn.property()),this.component[t]=n,this.component._properties[t]=n,this.component}function bindInternalProperty(t,n,e,i){e in t||t.setProperty(e),t[e].on("change",function(t){n.set(e,i?i(t):t)})}function createInternalScope(t,n){var e=this,i=new e.fastn.Model(t);for(var o in t)bindInternalProperty(e.component,i,o,n[o]);return{binding:function(){return e.fastn.binding.apply(null,arguments).attach(i)},model:i}}function extendComponent(t,n,e){if(t in this.types)return this.component;if(t in this.fastn.components)this.fastn.components[t](this.fastn,this.component,t,n,e,createInternalScope.bind(this));else{if(!(GENERIC in this.fastn.components))throw new Error('No component of type "'+t+'" is loaded');this.fastn.components._generic(this.fastn,this.component,t,n,e,createInternalScope.bind(this)),this.types._generic=!0}return this.types[t]=!0,this.component}function isType(t){return t in this.types}function FastnComponent(t,n,e,i){var o=this,s={types:{},fastn:t,component:o,binding:t.binding("."),destroyed:!1,scope:new t.Model(!1),lastBound:null};s.emitAttach=emitAttach.bind(s),s.emitDetach=emitDetach.bind(s),s.binding._default_binding=!0,o._type=n,o._properties={},o._settings=e||{},o._children=i?flatten(i):[],o.attach=attachComponent.bind(s),o.detach=detachComponent.bind(s),o.scope=getScope.bind(s),o.destroy=destroy.bind(s),o.destroyed=isDestroyed.bind(s),o.binding=getSetBinding.bind(s),o.setProperty=setProperty.bind(s),o.clone=clone.bind(s),o.children=slice.bind(o._children),o.extend=extendComponent.bind(s),o.is=isType.bind(s),o.binding(s.binding),o.on("attach",attachProperties.bind(this)),o.on("render",onRender.bind(this)),o.on("detach",detachProperties.bind(this)),o.on("destroy",destroyProperties.bind(this)),t.debug&&o.on("render",function(){o.element&&"object"==typeof o.element&&(o.element._component=o)})}var is=require("./is"),GENERIC="_generic",EventEmitter=require("events").EventEmitter,slice=Array.prototype.slice;FastnComponent.prototype=Object.create(EventEmitter.prototype),FastnComponent.prototype.constructor=FastnComponent,FastnComponent.prototype._fastn_component=!0,module.exports=FastnComponent;

},{"./is":19,"events":42}],13:[function(require,module,exports){
function fuseBinding(){function e(){n||c(o.apply(null,r.map(function(e){return e()})))}var t,n,i=this,a=Array.prototype.slice.call(arguments),r=a.slice(),o=r.pop(),c=createBinding.call(i,"result");c._arguments=a,"function"!=typeof r[r.length-1]||is.binding(r[r.length-1])||(t=o,o=r.pop()),c._model.removeAllListeners(),c._set=function(e){if(t){n=!0;var i=t(e);same(i,r[0]())||(r[0](i),c._change(i)),n=!1}else c._change(e)},r.forEach(function(t,n){is.binding(t)||(t=createBinding.call(i,t),r.splice(n,1,t)),t.on("change",e),c.on("detach",t.detach)});var d;return c.on("attach",function(t){n=!0,r.forEach(function(e){e.attach(t,1)}),n=!1,d!==t&&e(),d=t}),c}function createValueBinding(e){var t=createBinding.call(e,"value");return t.attach=function(){return t},t.detach=function(){return t},t}function bindingTemplate(e){if(!arguments.length)return this.value;if("."!==this.binding._fastn_binding)return this.binding._set(e),this.binding}function createBinding(e,t){function n(t){c._model.attach(t),c._change(c._model.get(e)),c.emit("attach",t,1)}function i(){c._model.detach()}var a=this;if(t)return fuseBinding.apply(a,arguments);if(null==e)return createValueBinding(a);var r,o={},c=o.binding=bindingTemplate.bind(o);return setPrototypeOf(c,functionEmitter),c.setMaxListeners(1e4),c._arguments=[e],c._model=new a.Model(!1),c._fastn_binding=e,c._firm=-1/0,c.attach=function(e,t){if(firmer(c,t))return c;c._firm=t;var r=a.isModel(e);return r&&o.attachedModel===e?c:(o.attachedModel&&(o.attachedModel.removeListener("attach",n),o.attachedModel.removeListener("detach",i),o.attachedModel=null),r&&(o.attachedModel=e,o.attachedModel.on("attach",n),o.attachedModel.on("detach",i),e=e._model),e instanceof Object||(e={}),c._model._model===e?c:(n(e),c))},c.detach=function(e){return firmer(c,e)?c:(o.value=void 0,c._model.isAttached()&&c._model.detach(),c.emit("detach",1),c)},c._set=function(t){same(c._model.get(e),t)||(c._model.isAttached()||c._model.attach(c._model.get(".")),c._model.set(e,t))},c._change=function(e){o.value=e,c.emit("change",c())},c.clone=function(e){var t=createBinding.apply(a,c._arguments);return e&&t.attach(o.attachedModel||c._model._model,c._firm),t},c.destroy=function(e){r||e&&c.listeners("change").length||(r=!0,c.emit("destroy"),c.detach(),c._model.destroy())},c.destroyed=function(){return r},"."!==e&&c._model.on(e,c._change),c}function from(e){if(is.binding(e))return e;var t=this();return t(e),t}var is=require("./is"),firmer=require("./firmer"),functionEmitter=require("function-emitter"),setPrototypeOf=require("setprototypeof"),same=require("same-value");module.exports=function(e){var t=createBinding.bind(e);return t.from=from.bind(t),t};

},{"./firmer":16,"./is":19,"function-emitter":26,"same-value":32,"setprototypeof":34}],14:[function(require,module,exports){
function insertChild(e,n,t,i){if(null!=t&&!1!==t){var r=n._children.indexOf(t),l=e.toComponent(t);l!==t&&~r&&n._children.splice(r,1,l),~r&&l===t||l.attach(n.scope(),1),r!==i&&(~r&&n._children.splice(r,1),n._children.splice(i,0,l)),n.element&&(l.element||l.render(),n._insert(l.element,i),l.emit("insert",n),n.emit("childInsert",l))}}function getContainerElement(){return this.containerElement||this.element}function insert(e,n){var t=e,i=this.container,r=this.fastn;if(n&&"object"==typeof n&&(t=Array.prototype.slice.call(arguments)),isNaN(n)&&(n=i._children.length),Array.isArray(t))for(var l=0;l<t.length;l++)i.insert(t[l],l+n);else insertChild(r,i,t,n);return i}module.exports=function(e,n,t,i,r){return n.insert=insert.bind({container:n,fastn:e}),n._insert=function(e,t){var i=n.getContainerElement();i&&i.childNodes[t]!==e&&i.insertBefore(e,i.childNodes[t])},n.remove=function(e){var t=n._children.indexOf(e);~t&&n._children.splice(t,1),e.detach(1),e.element&&(n._remove(e.element),e.emit("remove",n)),n.emit("childRemove",e)},n._remove=function(e){var t=n.getContainerElement();e&&t&&e.parentNode===t&&t.removeChild(e)},n.empty=function(){for(;n._children.length;)n.remove(n._children.pop())},n.replaceChild=function(e,t){var i=n._children.indexOf(e);~i&&(n.remove(e),n.insert(t,i))},n.getContainerElement=getContainerElement.bind(n),n.on("render",n.insert.bind(null,n._children,0)),n.on("attach",function(t,i){for(var r=0;r<n._children.length;r++)e.isComponent(n._children[r])&&n._children[r].attach(t,i)}),n.on("destroy",function(t,i){for(var r=0;r<n._children.length;r++)e.isComponent(n._children[r])&&n._children[r].destroy(i)}),n};
},{}],15:[function(require,module,exports){
function updateTextProperty(e,t,n){if(2===arguments.length)return t.textContent;t.textContent=null==n?"":n}var setify=require("setify"),classist=require("classist");module.exports={class:function(e,t,n){if(e._classist||(e._classist=classist(t)),arguments.length<3)return e._classist();e._classist(n)},display:function(e,t,n){if(2===arguments.length)return"none"!==t.style.display;t.style.display=n?null:"none"},disabled:function(e,t,n){if(2===arguments.length)return t.hasAttribute("disabled");n?t.setAttribute("disabled","disabled"):t.removeAttribute("disabled")},textContent:updateTextProperty,innerText:updateTextProperty,innerHTML:function(e,t,n){if(2===arguments.length)return t.innerHTML;t.innerHTML=null==n?"":n},value:function(e,t,n){var l=t.type;return"INPUT"===t.nodeName&&"date"===l?2===arguments.length?t.value?new Date(t.value.replace(/-/g,"/").replace("T"," ")):null:(n=null!=n?new Date(n):null,void(!n||isNaN(n)?t.value=null:t.value=[n.getFullYear(),("0"+(n.getMonth()+1)).slice(-2),("0"+n.getDate()).slice(-2)].join("-"))):2===arguments.length?t.value:(void 0===n&&(n=null),"PROGRESS"===t.nodeName&&(n=parseFloat(n)||0),void setify(t,n))},max:function(e,t,n){if(2===arguments.length)return t.value;"PROGRESS"===t.nodeName&&(n=parseFloat(n)||0),t.max=n},style:function(e,t,n){if(2===arguments.length)return t.style;for(var l in n)t.style[l]=n[l]},type:function(e,t,n){if(2===arguments.length)return t.type;t.setAttribute("type",n)}};

},{"classist":6,"setify":33}],16:[function(require,module,exports){
module.exports=function(i,r){if(null!=r&&(void 0===i._firm||r<i._firm))return!0};

},{}],17:[function(require,module,exports){
function createProperties(e,t,n){for(var r in n){var o=n[r];("function"!=typeof o||e.isProperty(o)||e.isBinding(o))&&t.addDomProperty(r)}}function trackKeyEvents(e,t,n){"_lastStates"in e&&"charCode"in n&&(e._lastStates.unshift(t.value),e._lastStates.pop())}function addDomHandler(e,t,n,r,o){var i=n.split(".");"on"===i[0]&&i.shift();var a=function(r){trackKeyEvents(e,t,r),e.emit(n,r,e.scope())};t.addEventListener(r,a,o),e.on("destroy",function(){t.removeEventListener(r,a,o)})}function addDomHandlers(e,t,n){for(var r=n.split(" "),o=0;o<r.length;o++){var i=r[o],a=i.match(matchDomHandlerName);a&&((a[1]||"on"+a[2]in t)&&addDomHandler(e,t,n,a[2],a[3]))}}function addAutoHandler(e,t,n,r){if(r[n]){var o=r[n].split(":"),i=n.slice(2);delete r[n];var a=function(n){var r=fancyProps[o[1]],i=r?r(e,t):t[o[1]];trackKeyEvents(e,t,n),e[o[0]](i)};t.addEventListener(i,a),e.on("destroy",function(){t.removeEventListener(i,a)})}}function addDomProperty(e,t,n){function r(){var e=i.getPropertyElement(t),a=n();if(e&&!i.destroyed()){if("value"===t&&i._lastStates&&~i._lastStates.indexOf(a))return clearTimeout(o),void(o=setTimeout(r,50));var d=t in e,s=fancyProps[t],c=s?s(i,e):d?e[t]:e.getAttribute(t);if(s||d||null!=a||(a=""),a!==c){if(s)return void s(i,e,a);if(d)return void(e[t]=a);"function"!=typeof a&&"object"!=typeof a&&e.setAttribute(t,a)}}}var o,i=this;n=n||i[t]||e.property(),i.setProperty(t,n),n.updater(r)}function onRender(){var e,t=this;for(var n in t._settings)e=t.getEventElement(n),"on"===n.slice(0,2)&&n in e&&addAutoHandler(t,e,n,t._settings);for(var r in t._events)e=t.getEventElement(n),addDomHandlers(t,e,r)}function render(){return this.element=this.createElement(this._settings.tagName||this._tagName),"value"in this.element&&(this._lastStates=new Array(2)),this.emit("render"),this}function genericComponent(e,t,n,r,o){return t.is(n)?t:(t._tagName=n===GENERIC?t._tagName||"div":n,t.is(GENERIC)?t:(t.extend("_container",r,o),t.addDomProperty=addDomProperty.bind(t,e),t.getEventElement=t.getContainerElement,t.getPropertyElement=t.getContainerElement,t.updateProperty=genericComponent.updateProperty,t.createElement=genericComponent.createElement,createProperties(e,t,r),t.render=render.bind(t),t.on("render",onRender),t))}var containerComponent=require("./containerComponent"),schedule=require("./schedule"),fancyProps=require("./fancyProps"),matchDomHandlerName=/^((?:el\.)?)([^. ]+)(?:\.(capture))?$/,GENERIC="_generic";genericComponent.updateProperty=function(e,t,n){"undefined"!=typeof document&&document.contains(e.element)?schedule(t,n):n()},genericComponent.createElement=function(e){return e instanceof Node?e:document.createElement(e)},module.exports=genericComponent;

},{"./containerComponent":14,"./fancyProps":15,"./schedule":23}],18:[function(require,module,exports){
function inflateProperties(e,n){for(var t in n){var i=n[t],o=e[t];is.property(n[t])?(is.property(o)&&o.destroy(),i.addTo(e,t)):is.property(o)&&(is.binding(i)?o.binding(i):o(i),o.addTo(e,t))}}function validateExpectedComponents(e,n,t){t=t.filter(function(n){return!(n in e)}),t.length&&console.warn(['fastn("'+n+'") uses some components that have not been registered with fastn',"Expected conponent constructors: "+t.join(", ")].join("\n\n"))}var createProperty=require("./property"),createBinding=require("./binding"),BaseComponent=require("./baseComponent"),crel=require("crel"),Enti=require("enti"),objectAssign=require("object-assign"),is=require("./is");module.exports=function(e,n){function t(e){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=n[1],r=2,s=t.toComponent(n[1]);(Array.isArray(n[1])||s||!n[1])&&(n[1]=s||n[1],r--,o=null),o=objectAssign({},o||{});for(var a,p="string"==typeof e?e.split(":"):Array.isArray(e)?e:[e],c=n.slice(r),d=t.base(e,o,c);a=p.shift();)d.extend(a,o,c);return d._properties={},inflateProperties(d,o),d}if(!e||"object"!=typeof e)throw new Error("fastn must be initialised with a components object");e._container=e._container||require("./containerComponent"),t.toComponent=function(e){if(null!=e)return is.component(e)?e:"object"!=typeof e||e instanceof Date?t("text",{auto:!0},e):crel.isElement(e)?t(e):crel.isNode(e)?t("text",{auto:!0},e.textContent):void 0},t.debug=n,t.property=createProperty.bind(t),t.binding=createBinding(t),t.isComponent=is.component,t.isBinding=is.binding,t.isDefaultBinding=is.defaultBinding,t.isBindingObject=is.bindingObject,t.isProperty=is.property,t.components=e,t.Model=Enti,t.isModel=Enti.isEnti.bind(Enti),t.base=function(e,n,i){return new BaseComponent(t,e,n,i)};for(var i in e){var o=e[i];o.expectedComponents&&validateExpectedComponents(e,i,o.expectedComponents)}return t};

},{"./baseComponent":12,"./binding":13,"./containerComponent":14,"./is":19,"./property":22,"crel":21,"enti":11,"object-assign":30}],19:[function(require,module,exports){
function isComponent(n){return n&&typeof n===OBJECT&&FASTNCOMPONENT in n}function isBindingObject(n){return n&&typeof n===OBJECT&&FASTNBINDING in n}function isBinding(n){return typeof n===FUNCTION&&FASTNBINDING in n}function isProperty(n){return typeof n===FUNCTION&&FASTNPROPERTY in n}function isDefaultBinding(n){return typeof n===FUNCTION&&FASTNBINDING in n&&DEFAULTBINDING in n}var FUNCTION="function",OBJECT="object",FASTNBINDING="_fastn_binding",FASTNPROPERTY="_fastn_property",FASTNCOMPONENT="_fastn_component",DEFAULTBINDING="_default_binding";module.exports={component:isComponent,bindingObject:isBindingObject,binding:isBinding,defaultBinding:isDefaultBinding,property:isProperty};

},{}],20:[function(require,module,exports){
(function (global){
function each(e,t){if(e&&"object"==typeof e)if(Array.isArray(e))for(var r=0;r<e.length;r++)t(e[r],r);else for(var n in e)t(e[n],n)}function keyFor(e,t){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){var r=e.indexOf(t);return r>=0&&r}for(var n in e)if(e[n]===t)return n;return!1}var MultiMap=require("multimap"),merge=require("flat-merge"),requestIdleCallback=global.requestIdleCallback||global.requestAnimationFrame||global.setTimeout;MultiMap.Map=Map,module.exports=function(e,t,r,n,a){function o(r,n,a){var o,i;Array.isArray(n)&&n[0]===f&&(i=!0,o=n[2],n=n[1]);var l;return i?(l=u.get(o),l.set("key",a)):(l=new e.Model({item:n,key:a}),o=e.toComponent(r(l,t.scope())),o||(o=e("template")),o._listItem=n,o._templated=!0,u.set(o,l),c.set(n,o)),e.isComponent(o)&&!1!==t._settings.attachTemplates&&o.attach(l,2),o}function i(e,r){function n(){for(var a=Date.now();y.length&&Date.now()-a<r;){var i=y.shift(),l=o(e,i[0],i[1]);t.insert(l,i[2])}if(!y.length)return void(m=!1);requestIdleCallback(n)}m||(m=!0,y.sort(function(e,t){return e[2]-t[2]}),n())}function l(){function r(e,r){for(;h<t._children.length&&!t._children[h]._templated;)h++;y.push([e,r,h+g]),g++}y=[];var n=t.items(),a=t.template(),o=t.emptyTemplate(),l=t.insertionFrameTime()||1/0,m=s!==a,u=merge(a?n:[]);c.forEach(function(e,t){var r=keyFor(u,t);m||!1===r?(p(e),c.delete(t)):u[r]=[f,t,e]});var h=0,g=0;if(each(u,r),a&&i(a,l),s=a,0===g&&o){var d=e.toComponent(o(t.scope()));d||(d=e("template")),d._templated=!0,c.set({},d),t.insert(d)}}function p(e){t.remove(e),e.destroy()}e.components._generic?t.extend("_generic",n,a):t.extend("_container",n,a),"template"in n||console.warn('No "template" function was set for this templater component');var s,m,c=new MultiMap,u=new WeakMap,f={},y=[];return t.setProperty("insertionFrameTime"),t.setProperty("items",e.property([],n.itemChanges||"type keys shallowStructure").on("change",l)),t.setProperty("template",e.property().on("change",l)),t.setProperty("emptyTemplate",e.property().on("change",l)),t};

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"flat-merge":25,"multimap":28}],21:[function(require,module,exports){
!function(e,n){"object"==typeof exports?module.exports=n():"function"==typeof define&&define.amd?define(n):e.crel=n()}(this,function(){function e(){var l,p=arguments,s=p[0],m=p[1],v=2,x=p.length,b=e[i];if(s=e[u](s)?s:c.createElement(s),1===x)return s;if((!d(m,t)||e[f](m)||a(m))&&(--v,m=null),x-v==1&&d(p[v],"string")&&void 0!==s[o])s[o]=p[v];else for(;v<x;++v)if(null!=(l=p[v]))if(a(l))for(var g=0;g<l.length;++g)y(s,l[g]);else y(s,l);for(var h in m)if(b[h]){var N=b[h];typeof N===n?N(s,m[h]):s[r](N,m[h])}else d(m[h],n)?s[h]=m[h]:s[r](h,m[h]);return s}var n="function",t="object",o="textContent",r="setAttribute",i="attrMap",f="isNode",u="isElement",c=typeof document===t?document:{},d=function(e,n){return typeof e===n},l=typeof Node===n?function(e){return e instanceof Node}:function(e){return e&&d(e,t)&&"nodeType"in e&&d(e.ownerDocument,t)},p=function(n){return e[f](n)&&1===n.nodeType},a=function(e){return e instanceof Array},y=function(n,t){if(a(t))return void t.map(function(e){y(n,e)});e[f](t)||(t=c.createTextNode(t)),n.appendChild(t)};return e[i]={},e[u]=p,e[f]=l,"undefined"!=typeof Proxy&&(e.proxy=new Proxy(e,{get:function(n,t){return!(t in e)&&(e[t]=e.bind(null,t)),e[t]}})),e});
},{}],22:[function(require,module,exports){
function propertyTemplate(t){if(!arguments.length)return this.binding&&this.binding()||this.property._value;if(!this.destroyed){if(this.binding)return this.binding(t),this.property;this.valueUpdate(t)}return this.property}function changeChecker(t,e){if(e){var e=new WhatChanged(t,e);return function(t){return Object.keys(e.update(t)).length>0}}var r=t;return function(t){if(!same(r,t))return r=t,!0}}function propertyBinding(t){return arguments.length?(this.fastn.isBinding(t)||(t=this.fastn.binding(t)),t===this.binding?this.property:(this.binding&&this.binding.removeListener("change",this.valueUpdate),this.binding=t,this.model&&this.property.attach(this.model,this.property._firm),this.binding.on("change",this.valueUpdate),this.valueUpdate(this.binding()),this.property)):this.binding}function attachProperty(t,e){return firmer(this.property,e)?this.property:(this.property._firm=e,t instanceof Object||(t={}),this.binding&&(this.model=t,this.binding.attach(t,1)),this.property._events&&"attach"in this.property._events&&this.property.emit("attach",t,1),this.property)}function detachProperty(t){return firmer(this.property,t)?this.property:(this.binding&&(this.binding.removeListener("change",this.valueUpdate),this.binding.detach(1),this.model=null),this.property._events&&"detach"in this.property._events&&this.property.emit("detach",1),this.property)}function updateProperty(){return this.destroyed||(this.property._update&&this.property._update(this.property._value,this.property),this.property.emit("update",this.property._value)),this.property}function propertyUpdater(t){return arguments.length?(this.property._update=t,this.property):this.property._update}function destroyProperty(){return this.destroyed||(this.destroyed=!0,this.property.removeAllListeners("change").removeAllListeners("update").removeAllListeners("attach"),this.property.emit("destroy"),this.property.detach(),this.binding&&this.binding.destroy(!0)),this.property}function propertyDestroyed(){return this.destroyed}function addPropertyTo(t,e){return t.setProperty(e,this.property),this.property}function createProperty(t,e,r){"function"==typeof e&&(r=e,e=null);var i=n=propertyTemplate.bind(i);i={fastn:this,hasChanged:changeChecker(t,e),valueUpdate:function(t){n._value=t,i.hasChanged(t)&&(n.emit("change",n._value),n.update())}};var n=i.property=propertyTemplate.bind(i);return n._value=t,n._update=r,setPrototypeOf(n,propertyProto),n.binding=propertyBinding.bind(i),n.attach=attachProperty.bind(i),n.detach=detachProperty.bind(i),n.update=updateProperty.bind(i),n.updater=propertyUpdater.bind(i),n.destroy=destroyProperty.bind(i),n.destroyed=propertyDestroyed.bind(i),n.addTo=addPropertyTo.bind(i),n}var WhatChanged=require("what-changed"),same=require("same-value"),firmer=require("./firmer"),functionEmitter=require("function-emitter"),setPrototypeOf=require("setprototypeof"),propertyProto=Object.create(functionEmitter);propertyProto._fastn_property=!0,propertyProto._firm=1,module.exports=createProperty;

},{"./firmer":16,"function-emitter":26,"same-value":32,"setprototypeof":34,"what-changed":36}],23:[function(require,module,exports){
function run(){for(var e=Date.now();todo.length&&Date.now()-e<16;)todoKeys.shift(),todo.shift()();todo.length?requestAnimationFrame(run):scheduled=!1}function schedule(e,o){~todoKeys.indexOf(e)||(todo.push(o),todoKeys.push(e),scheduled||(scheduled=!0,requestAnimationFrame(run)))}var todo=[],todoKeys=[],scheduled,updates=0;module.exports=schedule;

},{}],24:[function(require,module,exports){
function updateText(){if(this.element){var e=this.text();this.element.textContent=null==e?"":e}}function autoRender(e){this.element=document.createTextNode(e)}function autoText(e,t,n){return e.render=autoRender.bind(e,n),e}function render(){this.element=this.createTextNode(this.text()),this.emit("render")}function textComponent(e,t,n,o,r){if(o.auto){if(delete o.auto,!e.isBinding(r[0]))return autoText(t,e,r[0]);o.text=r.pop()}return t.createTextNode=textComponent.createTextNode,t.render=render.bind(t),t.setProperty("text",e.property("",updateText.bind(t))),t}textComponent.createTextNode=function(e){return document.createTextNode(e)},module.exports=textComponent;
},{}],25:[function(require,module,exports){
function flatMerge(e,t){t&&"object"==typeof t||(t={}),e&&"object"==typeof e||(e=new t.constructor);for(var o=new e.constructor,r=Object.keys(e),c=Object.keys(t),n=0;n<r.length;n++)o[r[n]]=e[r[n]];for(var n=0;n<c.length;n++)o[c[n]]=t[c[n]];return o}module.exports=flatMerge;
},{}],26:[function(require,module,exports){
var EventEmitter=require("events").EventEmitter,functionEmitterPrototype=function(){};for(var key in EventEmitter.prototype)functionEmitterPrototype[key]=EventEmitter.prototype[key];module.exports=functionEmitterPrototype;

},{"events":42}],27:[function(require,module,exports){
module.exports=function(o){return o&&"object"==typeof o||"function"==typeof o};
},{}],28:[function(require,module,exports){
"use strict";function mapEach(t,e){for(var r,n=t.keys();!(r=n.next()).done;)e(t.get(r.value),r.value,t)}var Multimap=function(){function t(e){var n=this;n._map=r,t.Map&&(n._map=t.Map),n._=n._map?new n._map:{},e&&e.forEach(function(t){n.set(t[0],t[1])})}function e(t){if(Array.isArray(t)){var r=0;return{next:function(){return r<t.length?{value:t[r++],done:!1}:{done:!0}}}}return!t.next&&n&&(t.next=n(t,e)),t}var r;"undefined"!=typeof Map&&(r=Map,Map.prototype.keys||(Map.prototype.keys=function(){var t=[];return this.forEach(function(e,r){t.push(r)}),t})),t.prototype.get=function(t){return this._map?this._.get(t):this._[t]},t.prototype.set=function(t,e){var r=Array.prototype.slice.call(arguments);t=r.shift();var n=this.get(t);return n||(n=[],this._map?this._.set(t,n):this._[t]=n),Array.prototype.push.apply(n,r),this},t.prototype.delete=function(t,e){if(!this.has(t))return!1;if(1==arguments.length)return this._map?this._.delete(t):delete this._[t],!0;var r=this.get(t),n=r.indexOf(e);return-1!=n&&(r.splice(n,1),!0)},t.prototype.has=function(t,e){var r=this._map?this._.has(t):this._.hasOwnProperty(t);return 1!=arguments.length&&r?-1!=(this.get(t)||[]).indexOf(e):r},t.prototype.keys=function(){return e(this._map?this._.keys():Object.keys(this._))},t.prototype.values=function(){var t=[];return this.forEachEntry(function(e){Array.prototype.push.apply(t,e)}),e(t)},t.prototype.forEachEntry=function(t){mapEach(this,t)},t.prototype.forEach=function(t){var e=this;e.forEachEntry(function(r,n){r.forEach(function(r){t(r,n,e)})})},t.prototype.clear=function(){this._map?this._.clear():this._={}},Object.defineProperty(t.prototype,"size",{configurable:!1,enumerable:!0,get:function(){var t=0;return mapEach(this,function(e){t+=e.length}),t}});var n;try{n=new Function("iterator","makeIterator","var keysArray = []; for(var key of iterator){keysArray.push(key);} return makeIterator(keysArray).next;")}catch(t){}return t}();"object"==typeof exports&&module&&module.exports?module.exports=Multimap:"function"==typeof define&&define.amd&&define(function(){return Multimap});

},{}],29:[function(require,module,exports){
var supportedTypes=["text","search","tel","url","password"];module.exports=function(e){return!(!e.setSelectionRange||!~supportedTypes.indexOf(e.type))};
},{}],30:[function(require,module,exports){
"use strict";function toObject(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function shouldUseNative(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var r={},t=0;t<10;t++)r["_"+String.fromCharCode(t)]=t;if("0123456789"!==Object.getOwnPropertyNames(r).map(function(e){return r[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;module.exports=shouldUseNative()?Object.assign:function(e,r){for(var t,n,o=toObject(e),a=1;a<arguments.length;a++){t=Object(arguments[a]);for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);if(getOwnPropertySymbols){n=getOwnPropertySymbols(t);for(var c=0;c<n.length;c++)propIsEnumerable.call(t,n[c])&&(o[n[c]]=t[n[c]])}}return o};

},{}],31:[function(require,module,exports){
!function(){"use strict";var e={};e.parse=function(e){return"string"!=typeof e?{}:(e=e.trim().replace(/^(\?|#)/,""),e?e.trim().split("&").reduce(function(e,n){var o=n.replace(/\+/g," ").split("="),r=o[0],t=o[1];return r=decodeURIComponent(r),t=void 0===t?null:decodeURIComponent(t),e.hasOwnProperty(r)?Array.isArray(e[r])?e[r].push(t):e[r]=[e[r],t]:e[r]=t,e},{}):{})},e.stringify=function(e){return e?Object.keys(e).map(function(n){var o=e[n];return Array.isArray(o)?o.map(function(e){return encodeURIComponent(n)+"="+encodeURIComponent(e)}).join("&"):encodeURIComponent(n)+"="+encodeURIComponent(o)}).join("&"):""},"function"==typeof define&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports?module.exports=e:self.queryString=e}();

},{}],32:[function(require,module,exports){
module.exports=function(t,e){return t===e||typeof t==typeof e&&("object"!=typeof t||t instanceof Date&&e instanceof Date)&&String(t)===String(e)};

},{}],33:[function(require,module,exports){
var naturalSelection=require("natural-selection");module.exports=function(e,t){if(naturalSelection(e)&&e===document.activeElement){var n=e.selectionStart,l=e.selectionEnd;e.value=t,e.setSelectionRange(n,l)}else e.value=t};
},{"natural-selection":29}],34:[function(require,module,exports){
function setProtoOf(r,o){return r.__proto__=o,r}function mixinProperties(r,o){for(var t in o)r.hasOwnProperty(t)||(r[t]=o[t]);return r}module.exports=Object.setPrototypeOf||({__proto__:[]}instanceof Array?setProtoOf:mixinProperties);

},{}],35:[function(require,module,exports){
function tryParseJson(t){try{return JSON.parse(t)}catch(t){return t}}function timeout(){this.request.abort(),this.emit("timeout")}function Ajax(t){var e,s=this;if("string"==typeof t&&(t={url:t}),"object"!=typeof t&&(t={}),s.settings=t,s.request=new XMLHttpRequest,s.settings.method=s.settings.method||"get",s.settings.cors&&!1 in s.request&&("undefined"!=typeof XDomainRequest?s.request=new XDomainRequest:s.emit("error",new Error("Cors is not supported by this browser"))),!1===s.settings.cache&&(s.settings.data=s.settings.data||{},s.settings.data._=(new Date).getTime()),"get"===s.settings.method.toLowerCase()&&"object"==typeof s.settings.data){var r=s.settings.url.split("?");e=queryString.parse(r[1]);for(var n in s.settings.data)e[n]=s.settings.data[n];var i=queryString.stringify(e);s.settings.url=r[0]+(i?"?"+i:""),s.settings.data=null}s.request.addEventListener("progress",function(t){s.emit("progress",t)},!1),s.request.addEventListener("load",function(t){var e=t.target.responseText;if(s.settings.dataType&&"json"===s.settings.dataType.toLowerCase())if(""===e)e=void 0;else if((e=tryParseJson(e))instanceof Error)return void s.emit("error",t,e);t.target.status>=400?s.emit("error",t,e):s.emit("success",t,e)},!1),s.request.addEventListener("error",function(t){s.emit("error",t)},!1),s.request.addEventListener("abort",function(t){s.emit("error",t,new Error("Connection Aborted")),s.emit("abort",t)},!1),s.request.addEventListener("loadend",function(t){clearTimeout(s._requestTimeout),s.emit("complete",t)},!1),s.request.open(s.settings.method||"get",s.settings.url,!0),s.settings.cors&&"withCredentials"in s.request&&(s.request.withCredentials=!!t.withCredentials),!1!==s.settings.contentType&&s.request.setRequestHeader("Content-Type",s.settings.contentType||"application/json; charset=utf-8"),!1!==s.settings.requestedWith&&s.request.setRequestHeader("X-Requested-With",s.settings.requestedWith||"XMLHttpRequest"),s.settings.auth&&s.request.setRequestHeader("Authorization",s.settings.auth);for(var o in s.settings.headers)s.request.setRequestHeader(o,s.settings.headers[o]);!1!==s.settings.processData&&"json"===s.settings.dataType&&(s.settings.data=JSON.stringify(s.settings.data))}var EventEmitter=require("events").EventEmitter,queryString=require("query-string");Ajax.prototype=Object.create(EventEmitter.prototype),Ajax.prototype.send=function(){var t=this;t._requestTimeout=setTimeout(function(){timeout.apply(t,[])},t.settings.timeout||12e4),t.request.send(t.settings.data&&t.settings.data)},module.exports=Ajax;

},{"events":42,"query-string":31}],36:[function(require,module,exports){
function keysAreDifferent(e,t){if(e!==t){if(!e||!t||e.length!==t.length)return!0;for(var r=0;r<e.length;r++)if(!~t.indexOf(e[r]))return!0}}function getKeys(e){if(e&&"object"==typeof e)return Object.keys(e)}function WhatChanged(e,t){if(this._changesToTrack={},null==t&&(t="value type keys structure reference"),"string"!=typeof t)throw"changesToTrack must be of type string";t=t.split(" ");for(var r=0;r<t.length;r++)this._changesToTrack[t[r]]=!0;this.update(e)}var clone=require("clone"),deepEqual=require("cyclic-deep-equal");WhatChanged.prototype.update=function(e){var t={},r=this._changesToTrack,n=getKeys(e);if("value"in r&&e+""!=this._lastReference+""&&(t.value=!0),("type"in r&&typeof e!=typeof this._lastValue||(null===e||null===this._lastValue)&&this.value!==this._lastValue)&&(t.type=!0),"keys"in r&&keysAreDifferent(this._lastKeys,getKeys(e))&&(t.keys=!0),null!==e&&"object"==typeof e||"function"==typeof e){var s=this._lastValue;"shallowStructure"in r&&(!s||"object"!=typeof s||Object.keys(e).some(function(t,r){return e[t]!==s[t]}))&&(t.shallowStructure=!0),"structure"in r&&!deepEqual(e,s)&&(t.structure=!0),"reference"in r&&e!==this._lastReference&&(t.reference=!0)}return this._lastValue="structure"in r?clone(e):"shallowStructure"in r?clone(e,!0,1):e,this._lastReference=e,this._lastKeys=n,t},module.exports=WhatChanged;

},{"clone":7,"cyclic-deep-equal":9}],37:[function(require,module,exports){
var fastn=require("./fastn"),debounce=require("debounce"),usersService=require("./users");searchModel={userSearch:"",result:null},userSearch=fastn.binding("userSearch").attach(searchModel).on("change",debounce(function(e){var r=usersService.users();if(!e)return void fastn.Model.set(searchModel,"result",null);fastn.Model.set(searchModel,"result",r.filter(function(r){if(r&&r.name&&r.name.first&&r.name.last)return~r.name.first.toLowerCase().indexOf(e.toLowerCase())||~r.name.last.toLowerCase().indexOf(e.toLowerCase())}))})),module.exports={searchModel:searchModel,userSearch:userSearch,result:fastn.binding("result").attach(searchModel)};

},{"./fastn":1,"./users":41,"debounce":10}],38:[function(require,module,exports){
var fastn=require("./fastn"),search=require("./search");module.exports=function(){return fastn("nav",{class:"search"},fastn("label","Search"),fastn("input",{value:search.userSearch,onkeyup:"value:value"}))};

},{"./fastn":1,"./search":37}],39:[function(require,module,exports){
var fastn=require("./fastn");module.exports=function(e,n){var s=require("./search").result,t=require("./users");return fastn("div",{class:fastn.binding(".","name",s,t.selectedUser,t.deletedUsers,function(e,n,s,t,i){var a=["user"];return s&&!~s.indexOf(e)&&a.push("hidden"),e===t&&a.push("selected"),~i.indexOf(e)&&a.push("deleted"),a})},fastn("img",{src:fastn.binding("picture",".",t.selectedUser,function(e,n,s){return n===s?e.large:e.medium})}),fastn("div",{class:"details"},fastn("label",{class:"name"},fastn.binding("name.first")," ",fastn.binding("name.last")),fastn("div",{class:"info"},fastn("p",{class:"extra"},fastn("a",{href:fastn.binding("email",function(e){return"mailto:"+e})},fastn.binding("email")),fastn("p",fastn.binding("cell",function(e){return"Mobile: "+e})))),fastn("button",{class:"remove"},"Delete").on("click",function(e,n){t.deleteUser(n.get("."))}))).on("click",function(e,n){t.selectedUser(n.get("."))})};
},{"./fastn":1,"./search":37,"./users":41}],40:[function(require,module,exports){
var fastn=require("./fastn"),usersService=require("./users");module.exports=function(){return fastn("list",{insertionFrameTime:64,class:"users",items:usersService.users,template:function(e,r){return require("./user.js")().binding("item")}},fastn("button",{class:"add"},"+").on("click",function(e,r){require("./newUser")()}))};

},{"./fastn":1,"./newUser":5,"./user.js":39,"./users":41}],41:[function(require,module,exports){
function getUsers(e){cpjax({url:"./users.json",dataType:"json"},function(s,r){e(s,r.map(function(e){return e.user}))})}function deleteUser(e){usersModel.push("deletedUsers",e)}function addUser(e){usersModel.insert("users",e,0)}var cpjax=require("cpjax"),fastn=require("./fastn"),usersModel=new fastn.Model({users:[],deletedUsers:[]});getUsers(function(e,s){e||usersModel.set("users",s)}),module.exports={usersModel:usersModel,users:fastn.binding("users|*").attach(usersModel),deletedUsers:fastn.binding("deletedUsers|*").attach(usersModel),selectedUser:fastn.binding("selected").attach(usersModel),deleteUser:deleteUser,addUser:addUser};
},{"./fastn":1,"cpjax":8}],42:[function(require,module,exports){
function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(e){return"function"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return"object"==typeof e&&null!==e}function isUndefined(e){return void 0===e}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(e){if(!isNumber(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){var t,i,n,s,r,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var h=new Error('Uncaught, unspecified "error" event. ('+t+")");throw h.context=t,h}if(i=this._events[e],isUndefined(i))return!1;if(isFunction(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),i.apply(this,s)}else if(isObject(i))for(s=Array.prototype.slice.call(arguments,1),o=i.slice(),n=o.length,r=0;r<n;r++)o[r].apply(this,s);return!0},EventEmitter.prototype.addListener=function(e,t){var i;if(!isFunction(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,isFunction(t.listener)?t.listener:t),this._events[e]?isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,isObject(this._events[e])&&!this._events[e].warned&&(i=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){function i(){this.removeListener(e,i),n||(n=!0,t.apply(this,arguments))}if(!isFunction(t))throw TypeError("listener must be a function");var n=!1;return i.listener=t,this.on(e,i),this},EventEmitter.prototype.removeListener=function(e,t){var i,n,s,r;if(!isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(i=this._events[e],s=i.length,n=-1,i===t||isFunction(i.listener)&&i.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(isObject(i)){for(r=s;r-- >0;)if(i[r]===t||i[r].listener&&i[r].listener===t){n=r;break}if(n<0)return this;1===i.length?(i.length=0,delete this._events[e]):i.splice(n,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(i=this._events[e],isFunction(i))this.removeListener(e,i);else if(i)for(;i.length;)this.removeListener(e,i[i.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){return this._events&&this._events[e]?isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(isFunction(t))return 1;if(t)return t.length}return 0},EventEmitter.listenerCount=function(e,t){return e.listenerCount(t)};

},{}]},{},[4]);
